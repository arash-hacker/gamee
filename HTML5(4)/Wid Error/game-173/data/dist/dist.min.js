!function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Game(e,t,n,i){console.log("game started"),this._initSavedData(n),this._initUpgradeCosts(),this._initUpgradeAvailability(),this._initBuyUpgradeCallback(),this.data=i,s.prepareScreen(this.getLevelMultiplier(),this.coins,this.level),this.setScore(),s.spinsCounterUI.setSpinsCount(0,0),s.hintHand.setSpinsRemain(u),this._registerSlideEvent(),this._initSound(e),this._start()}function Lobby(e,t,n,i,s){this.speedGain=(e+6)*l,this.inertia=(t+1)*p,this.nextLevel=Math.pow(2,n)*c,this.level=n,this.spinAttempts=u,this.bestSpins=i,this.speed=0,this.spins=0,this.progressed=!1,this.endCb=s,this._registerStopSpinning(),this._registerUpdate(),this._startSound()}Object.defineProperty(t,"__esModule",{value:!0}),t.timeLoop=t.SPIN_ATTEMPTS=void 0,t.Game=Game;var i=n(1),s=_interopRequireWildcard(i),a=n(4),r=n(3),d=n(6),o=_interopRequireWildcard(d),l=1750,p=3,c=25,u=t.SPIN_ATTEMPTS=5,h=t.timeLoop=new a.Chronos;Game.prototype={_initSavedData:function(e){this.speedUpgrades=e.speedUpgrades||0,this.inertiaUpgrades=e.inertiaUpgrades||0,this.timeRewardUpgrades=e.timeRewardUpgrades||0,this.useAvatar=e.useAvatar||0,this.level=e.level||0,this.coins=e.coins||0,this.bestSpins=e.bestSpins||0,this.highestScore=e.highestScore||0,this.gameTries=0},_initUpgradeCosts:function(){s.upgradeUI.updateCost(this.getUpgradeCost("speedUpgrades"),this.getUpgradeCost("inertiaUpgrades"),this.getUpgradeCost("timeRewardUpgrades")),s.upgradeUI.updateLevel(this.speedUpgrades,this.inertiaUpgrades,this.timeRewardUpgrades)},_initUpgradeAvailability:function(){s.upgradeUI.updateAvailability(!(this.getUpgradeCost("speedUpgrades")>this.coins),!(this.getUpgradeCost("inertiaUpgrades")>this.coins),!(this.getUpgradeCost("timeRewardUpgrades")>this.coins))},_initBuyUpgradeCallback:function(){var e=function(e,t){t.preventDefault();var n=this.getUpgradeCost(e);n>this.coins||(this[e]+=1,this.addCoins(-n),this._initUpgradeCosts(),this._initUpgradeAvailability(),this.saveState())};s.upgradeUI.bindUpgradeCallbacks(e.bind(this,"speedUpgrades"),e.bind(this,"inertiaUpgrades"),e.bind(this,"timeRewardUpgrades"))},_initSound:function(e){r.audio.mute(!e)},getLevelMultiplier:function(){return Math.pow(2,this.level)},getUpgradeCost:function(e){return Math.floor(25*Math.pow(1.4,this[e]))},_registerSlideEvent:function(){s.slideAreaUI.registerSlide(function(e,t){this.lobby||this.createLobby(),this.lobby.spinAttempt(e,t),console.log("createlobby"),s.hintHand.freezeHand()}.bind(this))},createLobby:function(){s.upgradeUI.upgradesEnabled(!1),this.lobby=new Lobby(this.speedUpgrades,this.inertiaUpgrades,this.level,this.bestSpins,this.endLobby.bind(this)),this.gameTries+=1},forceEnd:function(){s.resetAll(),this.gameTries=0,this.setScore(),this.resume()},saveState:function(e){gamee.gameSave({speedUpgrades:this.speedUpgrades,inertiaUpgrades:this.inertiaUpgrades,timeRewardUpgrades:this.timeRewardUpgrades,useAvatar:this.useAvatar,level:this.level,coins:this.coins,bestSpins:this.bestSpins,highestScore:this.highestScore},!1)},pause:function(){r.audio.pause(!0),h.setUpdating(!1)},resume:function(){r.audio.pause(!1),h.setUpdating(!0)},setSound:function(e){r.audio.mute(!e)},setScore:function(){gamee.updateScore(this.bestSpins)},restart:function(){this.lobby&&(this.lobby.restart(),this.endLobby(0,0,0)),s.resetAll(),this.setScore()},endLobby:function(e,t,n){this.lobby=null,this.addCoins(e),this.highestScore+=e,n&&(this.level+=1,s.spinsCounterUI.setLevelMultiplier(this.getLevelMultiplier())),s.setLevelBackground(this.level);var i=!1;t>this.bestSpins&&(i=!0,this.bestSpins=t,this.setScore()),this.saveState(i),this.gameTries,this._initUpgradeAvailability(),s.spinsCounterUI.setSpinsCount(0,0),s.hintHand.setSpinsRemain(u),s.hintHand.newBestVisible(!1),s.upgradeUI.upgradesEnabled(!0)},addCoins:function(e){this.coins+=e,s.coinsUI.setCoins(this.coins)},_start:function(e){var t=performance.now(),n=function step(){var e=performance.now(),n=e-t;t=e,h.update(n),window.requestAnimationFrame(step)};window.requestAnimationFrame(n)}},Lobby.prototype={_startSound:function(){r.audio.start()},_registerUpdate:function(){h.registerListener(this)},_registerStopSpinning:function(){var e=this;s.hintHand.bindStopButtonAction(function(){e.speed=0})},spinAttempt:function(e,t){var n=t/e*this.speedGain;this.spinAttempts<1||(this.spinAttempts--,s.hintHand.setSpinsRemain(this.spinAttempts),this.speed+=n,this.speed=Math.max(0,this.speed),this.speed=Math.min(this.speed,.025*this.speedGain))},restart:function(){this.stop(),this.speed=0,this.spins=0,this._updateUI()},stop:function(){r.audio.stop(),h.removeListener(this)},end:function(){var e=this;this.stop(),this.spins=Math.floor(this.spins),this.bestSpins=Math.max(this.bestSpins,this.spins);var t=Math.pow(2,this.level),n=!1,i=this.spins*t;this.spins>=this.nextLevel&&(n=!0),s.endScreen.runEndScreen(this.spins,this.bestSpins,t,i,function(){e.endCb(i,e.bestSpins,n)})},update:function(e){e*=.001,this._updateSpeed(e),this._updateSpins(e),this._updateSound(),this._updateUI(),this._resolveGameEnd()},_updateSpeed:function(e){this.speed-=65*e,(Math.abs(this.speed)<5||this.speed<0)&&(this.speed=0)},_updateSpins:function(e){this.spins+=e*Math.abs(this.speed)/60},_updateUI:function(){s.speedMeterUI.setSpeed(this.speed);var e=this.spins>0?this.spins/this.nextLevel*100:0;s.spinsCounterUI.setSpinsCount(this.spins,e),e>100&&!this.progressed&&(this.progressed=!0,s.spinsCounterUI.setLevelMultiplier(Math.pow(2,this.level+1)),s.spinsCounterUI.levelUp(),this.level+=1),this.bestSpins<this.spins&&s.hintHand.newBestVisible(!0);var t=360*-(this.spins-Math.floor(this.spins))*Math.sign(this.speed);o.render(t,this.speed)},_resolveGameEnd:function(){0===this.speed&&this.end()},_updateSound:function(){r.audio.setRate(this.speed)}}},function(e,t,n){"use strict";function swipe(e,t){function handleTouchStart(e){e.preventDefault(),this.xDown=e.touches[0].clientX,this.yDown=e.touches[0].clientY,this.startTime=performance.now()}function handleMouseStart(e){this.xDown=e.clientX,this.yDown=e.clientY,this.startTime=performance.now()}function handleTouchMove(e){e.preventDefault(),this.xLast=e.touches[0].clientX,this.yLast=e.touches[0].clientY}function handleTouchEnd(e){null!==s.xDown&&resolveSlide.call(this,this.xLast,this.yLast)}function handleMouseEnd(e){null!==s.xDown&&resolveSlide.call(this,e.clientX,e.clientY)}function resolveSlide(e,s){var a=performance.now(),r=Math.abs(e-this.xDown)/n,d=Math.abs(s-this.yDown)/i,o=Math.max(r,d);o/(a-this.startTime)>.001&&t(a-this.startTime,o),this.xDown=null,this.startTime=null}var n=e.clientWidth,i=e.clientHeight,s={xDown:null,startTime:null,xLast:null,yDown:null,yLast:null};e.addEventListener("touchstart",handleTouchStart.bind(s),!1),e.addEventListener("mousedown",handleMouseStart.bind(s),!1),e.addEventListener("touchend",handleTouchEnd.bind(s),!1),e.addEventListener("touchout",handleTouchEnd.bind(s),!1),e.addEventListener("touchmove",handleTouchMove.bind(s),!1),e.addEventListener("mouseup",handleMouseEnd.bind(s),!1),e.addEventListener("mouseout",handleMouseEnd.bind(s),!1)}function renderTriNumber(e){e=Math.floor(e);var t,n=["","k","M","B","T"];for(t=0;t<n.length&&!(.001*e<1);t++)e*=.001;return(e=parseInt(Math.floor(10*e))/10)+n[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.hintHand=t.coinsUI=t.slideAreaUI=t.upgradeUI=t.speedMeterUI=t.spinsCounterUI=t.endScreen=t.setLevelBackground=t.prepareScreen=t.resetAll=void 0;var i=n(0),s=document.getElementById("game-wrapper"),a=document.getElementById("overlay-wrapper"),r=document.getElementById("game-overlay"),d=(t.resetAll=function(){a.style.display="none",r.style.display="none"},t.prepareScreen=function(e,t,n){p.setCoins(t),o.setLevelMultiplier(e);for(var i=window.innerHeight/1136,r=.5*(window.innerWidth-640*i),l=[a,s],c=0;c<l.length;c++)l[c].style.WebkitTransform="scale("+i+")",l[c].style.msTransform="scale("+i+")",l[c].style.transform="scale("+i+")",l[c].style.transformOrigin="left top",l[c].style.marginLeft=r+"px";d(n),s.style.display="block"},t.setLevelBackground=function(e){var t=0;t=Math.floor(Math.abs(.5*e))%5,document.body.style.backgroundImage="url(assets/ui/bg_pattern_"+t+".png)"}),o=(t.endScreen=function(){var e=document.createElement("div");e.className="end-screen ui-text";var t=document.createElement("span");t.className="font-180 font-white line-160";var n=document.createElement("span"),i=document.createElement("p");i.className="font-white",i.innerText="SPINS:",i.appendChild(document.createElement("br")),i.appendChild(t),i.appendChild(document.createElement("br"));var s=document.createElement("span");s.className="font-purple",s.appendChild(document.createTextNode("BEST: ")),s.appendChild(n),i.appendChild(s),e.appendChild(i);var d=document.createElement("div");d.className="hr-yellow",e.appendChild(d);var o=document.createElement("span");o.className="font-30 font-white spins-minor";var l=document.createElement("span");l.className="font-white level-multiplier";var p=document.createElement("span");p.className="font-70 coin-text";var c=document.createElement("button");c.className="button-ok",document.createElement("button").className="button-share";var u=document.createElement("p");u.className="font-white",u.innerText="REWARD:",u.appendChild(document.createElement("br")),e.appendChild(u),u=document.createElement("div"),u.className="font-white";var h=document.createElement("span");return h.className="coin-icon",u.appendChild(h),u.appendChild(p),e.appendChild(u),u=document.createElement("div"),u.className="font-white",u.appendChild(o),u.appendChild(l),e.appendChild(u),u=document.createElement("div"),u.className="font-white",u.className="ls-wrapper",u.appendChild(c),e.appendChild(u),{runEndScreen:function(i,s,d,u,h){a.innerHTML="",a.appendChild(e),a.style.display="block",r.style.display="block",e.style.display="block",t.innerText=Math.floor(i),n.innerText=Math.floor(s),o.innerText="spins",l.innerText="x"+Math.floor(d),p.innerText=renderTriNumber(u);var m=c.cloneNode(!0);c.parentNode.replaceChild(m,c),c=m,c.addEventListener("click",function(){a.style.display="none",r.style.display="none",e.style.display="none",h()},!1)}}}(),t.spinsCounterUI=function(){var e=document.createElement("div");e.className="spins-counter ui-text";var t=document.createElement("div");t.className="spins-count";var n=document.createElement("div");n.className="spins-counter-overlay";var i=document.createElement("div");i.className="fill-bar";var a=document.createElement("div");a.className="fill-bar-progress";var r=document.createElement("span");r.className="level-mult";var d=document.createElement("div");d.className="level-mult-circle";var o=document.createElement("span");o.innerText="SPINS:",o.className="spins-actual-desc";var l=document.createElement("span");return l.className="spins-actual",t.appendChild(o),t.appendChild(document.createElement("br")),t.appendChild(l),i.appendChild(a),e.appendChild(i),e.appendChild(t),d.appendChild(r),e.appendChild(d),e.appendChild(n),s.appendChild(e),{setSpinsCount:function(e,t){l.innerText=Math.floor(e),a.style.width=t+"%"},setLevelMultiplier:function(e){r.innerHTML='<span class="mult-special">x</span>'+e},levelUp:function(){d.classList.add("level-up"),setTimeout(function(){d.classList.remove("level-up")},300)}}}()),l=(t.speedMeterUI=function(){var e=document.createElement("div");e.className="speed-meter ui-text";var t=document.createElement("span");t.innerText="0",t.className="font-36";var n=document.createElement("img");return n.className="speed-ico",n.src="assets/ui/rev_icon.png",e.appendChild(t),e.appendChild(n),s.appendChild(e),{setSpeed:function(e){t.innerText=Math.round(e)}}}(),t.upgradeUI=function(){var e=document.createElement("div");e.className="upgrade-screen ui-text";var t=document.createElement("div");t.className="close-button",t.addEventListener("click",function(){a.style.display="none",r.style.display="none",e.style.display="none";var t=p.getWrapper();s.appendChild(t)}),e.appendChild(t);var n=document.createElement("p");n.className="font-70 upgrade-header",n.innerText="UPGRADES",e.appendChild(n);for(var i=["more speed","longer spins","time reward"],d=["rev_icon.png","spins_icon.png","time_icon.png"],o=[],l=[],c=[],u=0;u<i.length;u++){var h=document.createElement("span");h.className="font-40 upgrade-text",h.innerText=i[u];var m=document.createElement("img");m.src="assets/ui/"+d[u];var v=document.createElement("span");v.className="upgrade-level-wrapper font-60";var g=document.createElement("span");g.className="upgrade-level",l.push(g),v.appendChild(document.createTextNode(" ")),v.appendChild(g);var f=document.createElement("button");f.className="button-upgrade button-large";document.createElement("span").className="coin-icon";var b=document.createTextNode("");f.appendChild(b),o.push(b),c.push(f);var _=document.createElement("div");_.className="font-white",_.className="button-upgrade-wrapper",_.appendChild(h),_.appendChild(document.createElement("br")),_.appendChild(m),_.appendChild(v),_.appendChild(f),e.appendChild(_)}var y=function(t){t.preventDefault(),a.innerHTML="";var n=p.getWrapper();a.appendChild(n),a.appendChild(e),a.style.display="block",r.style.display="block",e.style.display="block"},m=document.createElement("div");return m.className="upgrade-ico",m.addEventListener("click",y,!1),s.appendChild(m),{updateCost:function(e,t,n){o[0].textContent=renderTriNumber(e),o[1].textContent=renderTriNumber(t),o[2].textContent=renderTriNumber(n)},updateAvailability:function(e,t,n){c[0].disabled=!1===e,c[1].disabled=!1===t,c[2].disabled=!1===n},bindUpgradeCallbacks:function(e,t,n){c[0].addEventListener("click",e),c[1].addEventListener("click",t),c[2].addEventListener("click",n)},updateLevel:function(e,t,n){l[0].textContent=e,l[1].textContent=t,l[2].textContent=n},upgradesEnabled:function(e){m.removeEventListener("click",y),m.classList.add("disabled"),e&&(m.addEventListener("click",y,!1),m.classList.remove("disabled"))}}}(),t.slideAreaUI=function(){var e=document.createElement("div");return e.className="slide-area",document.body.appendChild(e),{registerSlide:function(t){swipe(e,t)},slideAreaEl:e}}()),p=t.coinsUI=function(){var e=document.createElement("div");e.className="coins-total ui-text";var t=document.createElement("span");t.innerText="0",t.className="font-36 font-yellow";var n=document.createElement("img");return n.className="coins-ico",n.src="assets/ui/coin.png",e.appendChild(n),e.appendChild(t),s.appendChild(e),{setCoins:function(e){t.innerText=renderTriNumber(e)},getWrapper:function(){return e}}}();t.hintHand=function(){var e=document.createElement("div");e.className="hint-hand-wrapper";var t=document.createElement("span");t.className="hint-hand-ico";var n=document.createElement("span");n.className="hint-spins-remain ui-text";var a=document.createElement("span");a.className="hint-new-best ui-text",a.innerText="NEW BEST";var r=document.createElement("div");return r.className="hint-stop-button",e.appendChild(a),e.appendChild(t),e.appendChild(r),e.appendChild(n),s.appendChild(e),{setSpinsRemain:function(e){var t="/"+i.SPIN_ATTEMPTS;n.innerText=e+t,0===e?(this.noMoreSpins(),this.showStopButton(!0)):this.showStopButton(!1)},noMoreSpins:function(){n.innerText="NO SWIPES LEFT"},newBestVisible:function(e){a.style.visibility=e?"visible":"hidden"},showStopButton:function(e){e?(r.style.display="block",t.style.display="none",l.slideAreaEl.style.display="none"):(r.style.display="none",t.style.display="block",l.slideAreaEl.style.display="block")},bindStopButtonAction:function(e){var t=r.cloneNode(!0);r.parentNode.replaceChild(t,r),r=t,r.addEventListener("click",e,!1)},freezeHand:function(){t.className="hint-hand-ico-static"}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.sound=!1,this.controller=null,this.gameInstance=null,this.Game=e,this._initGame()};i.prototype={_initGame:function(){var e={},t=["saveState","socialData"];gamee.emitter.addEventListener("mute",function(e){try{this.gameInstance.setSound(!1)}catch(e){this.sound=!1}}.bind(this)),gamee.emitter.addEventListener("unmute",function(e){try{this.gameInstance.setSound(!0)}catch(e){this.sound=!0}}.bind(this)),gamee.emitter.addEventListener("pause",function(e){try{this.gameInstance.pause()}catch(e){}}.bind(this)),gamee.emitter.addEventListener("resume",function(e){try{this.gameInstance.resume()}catch(e){}}.bind(this)),gamee.gameInit("FullScreen",e,t,this._initGameCb.bind(this))},_initGameCb:function(e){if(this.controller=e.controller,this.sound=e.sound,this.data=e,this.saveState={},null!==e.saveState)try{var t=JSON.parse(e.saveState);null!==t&&(this.saveState=t)}catch(e){}this._gameReady()},_gameReady:function(){gamee.emitter.addEventListener("start",this.gameStart.bind(this)),gamee.gameReady()},_gameReadyCb:function(){},gameStart:function(e){null!==this.gameInstance?(this.gameInstance.restart(),this.gameInstance.resume()):(this.gameInstance=new this.Game(this.sound,this.controller,this.saveState,this.data),this.gameInstance.resume()),e.detail.callback()}};t.createGameeConnector=function(e){window.testt=new i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audio=void 0;var i=(n(1),["assets/audio/63532__florian-reinke__click2.mp3","assets/audio/63532__florian-reinke__click2.ogg"]),s=function(){this.isPlaying=!1,this._init()};s.prototype={_init:function(){this.sound=new Howl({src:[i[0],i[1]],loop:!0,preload:!0,volume:1,rate:1,autoplay:!1})},start:function(e){e=e||0,this.setRate(e);try{this.sound.stop()}catch(e){}this.sound.play(),this.isPlaying=!0},mute:function(e){this.sound.mute(e)},pause:function(e){e?this.sound.pause():this.isPlaying&&this.sound.play()},stop:function(){this.sound.stop(),this.isPlaying=!1},setRate:function(e){e*=.05,e*=this.sound.duration(),e=Math.min(7.1,e),e=Math.max(.1,e),this.sound.rate(e)}};t.audio=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.Chronos=function(){this.listeners=[],this._init()};i.prototype={_init:function(){this.timeRunning=0,this.timeMod=1},registerListener:function(e){this.listeners.push(e)},prependListener:function(e){this.listeners.unshift(e)},removeListener:function(e){var t;for(t=0;t<this.listeners.length;t++)e!==this.listeners[t]||this.listeners.splice(t)},update:function(e){var t;for(e*=this.timeMod,this.timeRunning+=e,t=0;t<this.listeners.length;t++)this.listeners[t].update(e)},setUpdating:function(e){e?delete this.update:this.update=function(){}}};t.createChronos=function(){return new i}},function(e,t,n){"use strict";var i=n(0);(0,n(2).createGameeConnector)(i.Game)},function(e,t,n){"use strict";function loadImages(){var e=0,t=0;s={};for(var n in c)t++,loadImage(c[n],n,function(){++e===t&&(a=s.stage0,r=i.width/a.width,d=i.height/a.height,o=Math.min(r,d),l=(i.width-a.width*o)/2,p=(i.height-a.height*o)/2,m(0,0))})}function loadImage(e,t,n){var i=document.createElement("img");i.onload=function(){s[t]=i,n()},i.src=e}function renderSpinner(e,t,n){h.save(),h.translate(i.width/2,i.height/2),h.rotate(e*Math.PI/180),h.translate(-i.width/2,-i.height/2),h.globalAlpha=t,h.drawImage(n,0,0,n.width,n.height,l,p,n.width*o,n.height*o),h.globalAlpha=1,h.restore()}function renderSpinnerCenter(e){h.save(),a=e,h.drawImage(a,0,0,a.width,a.height,l,p,a.width*o,a.height*o),h.restore()}Object.defineProperty(t,"__esModule",{value:!0});var i,s,a,r,d,o,l,p,c={stage0:"assets/spinners/spiner_stage0.png",stage1:"assets/spinners/spiner_stage1.png",stage2:"assets/spinners/spiner_stage2.png",stage3:"assets/spinners/spiner_stage3.png",middle:"assets/spinners/spiner_center.png"},u=document.getElementById("game-wrapper"),h=null;!function(){i=document.createElement("canvas"),i.id="spinner-ctx",i.width=640,i.height=640,h=i.getContext("2d"),u.appendChild(i),loadImages()}();var m=t.render=function(e,t,n){h.clearRect(0,0,i.width,i.height);var a=0;t>1200?(a=(t-1200)/400,renderSpinner(e,1,s.stage3)):t>800?(a=(t-800)/400,renderSpinner(e,1,s.stage2)):t>400?(a=(t-400)/400,renderSpinner(e,1,s.stage1),renderSpinner(e,.5*a+.5,s.stage2)):renderSpinner(e,1,s.stage0),renderSpinnerCenter(n&&s.avatar?s.avatar:s.middle)}}]);
//# sourceMappingURL=dist.min.js.map
