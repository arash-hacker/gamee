var Gamee;!function(t){var e=function(){function t(e,i){void 0===i&&(i=!1),this._game=null,this._gameeController=null,this._indices={right:1,up:2,left:4,down:8,A:16,B:32,button:64},this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0,this._gameRunning=!1,this._score=0,void 0!==window.gamee&&("Touch"!==e?(this._gameeController=window.gamee.controller.requestController(e,{enableKeyboard:i}),this.keyHandlers()):(this._gameeController=window.gamee.controller.requestController("Touch"),this.touchHandlers())),this.eventHandlers(),t._instance=this}return Object.defineProperty(t,"instance",{get:function(){return null===t._instance,t._instance},enumerable:!0,configurable:!0}),t.prototype.setGame=function(t){this._game=t},Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!0,configurable:!0}),t.prototype.keyHandlers=function(){var t=this;this._gameeController.on("keydown",function(e){t._pressesCache|=t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonDown&&i.onGameeButtonDown(e.button)}),this._gameeController.on("keyup",function(e){t._pressesCache&=~t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonUp&&i.onGameeButtonUp(e.button)})},t.prototype.processKeys=function(){var t=this._isDown;this._isDown=this._pressesCache;var e=t^this._isDown;this._justDown=e&this._isDown,this._justUp=e&~this._isDown},t.prototype.clearKeys=function(){this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0},t.prototype.isDown=function(t){return(this._isDown&this._indices[t])>0},t.prototype.justDown=function(t){return(this._justDown&this._indices[t])>0},Object.defineProperty(t.prototype,"anyIsDown",{get:function(){return this._isDown>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anyJustDown",{get:function(){return this._justDown>0},enumerable:!0,configurable:!0}),t.prototype.isUp=function(t){return!this.isDown(t)},t.prototype.justUp=function(t){return(this._justUp&this._indices[t])>0},t.prototype.touchHandlers=function(){var t=this;this._gameeController.on("touchstart",function(e){var i=t._game.state.getCurrentState();"function"==typeof i.onGameeTouchStart&&i.onGameeTouchStart(e)}),this._gameeController.on("touchend",function(e){var i=t._game.state.getCurrentState();"function"==typeof i.onGameeTouchEnd&&i.onGameeTouchEnd(e)}),this._gameeController.on("touchmove",function(e){var i=t._game.state.getCurrentState();"function"==typeof i.onGameeTouchMove&&i.onGameeTouchMove(e)}),this._gameeController.on("touchleave",function(e){var i=t._game.state.getCurrentState();"function"==typeof i.onGameeTouchLeave&&i.onGameeTouchLeave(e)}),this._gameeController.on("touchcancel",function(e){var i=t._game.state.getCurrentState();"function"==typeof i.onGameeTouchCancel&&i.onGameeTouchCancel(e)})},t.prototype.eventHandlers=function(){var t=this;window.gamee.onPause=function(){t.onPause()},window.gamee.onUnpause=function(){t.onUnpause()},window.gamee.onRestart=function(){t.onRestart()},window.gamee.onMute=function(){t._game.onMute()},window.gamee.onUnmute=function(){t._game.onUnmute()}},t.prototype.onPause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameePause&&t.onGameePause()},t.prototype.onUnpause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameeUnpause&&t.onGameeUnpause()},t.prototype.onRestart=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameeRestart&&t.onGameeRestart()},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t,window.gamee.score=t},enumerable:!0,configurable:!0}),t.prototype.addScore=function(t){this.score+=t},t.prototype.gameStart=function(){this._gameRunning||(this._gameRunning=!0,window.gamee.gameStart())},t.prototype.gameOver=function(){this._gameRunning&&(this._gameRunning=!1,window.gamee.gameOver())},t._instance=null,t}();t.Gamee=e}(Gamee||(Gamee={}));var Log;!function(t){var e=function(){function t(){}return t.msg=function(e){var i=t.messages;if(i.length<t.MAX_LINE)t.messages.push(e);else{for(var n=1;n<t.MAX_LINE;n++)i[n-1]=i[n];i[t.MAX_LINE-1]=e}},t.render=function(e){for(var i=t.messages,n=0;n<i.length;n++)e.text(i[n],50,70+16*n,"RGB(255, 0, 0)")},t.MAX_LINE=20,t.messages=[],t}();t.Log=e}(Log||(Log={}));var Helper;!function(t){var e=function(){function t(){}return t.randomizeArray=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=i?e.slice():e;return Phaser.ArrayUtils.shuffle(r),n?r.slice(0,t):r},t.sort=function(e,i,n,r){if(void 0===n&&(n=0),void 0===r&&(r=e.length),r>n){for(var s,a=n,o=n+1;r>=o;o++)i(e[n],e[o])>0&&(s=e[++a],e[a]=e[o],e[o]=s);s=e[n],e[n]=e[a],e[a]=s,t.sort(e,i,n,a-1),t.sort(e,i,a+1,r)}},t}();t.ArrayUtils=e}(Helper||(Helper={}));var Helper;!function(t){var e;!function(t){function e(t,e,i){var n=t*Math.PI*2*e,r=t*(2*Math.PI*i+Math.PI/2);return Math.sin(n)*Math.cos(r)}function i(t,e,i){var n=t*Math.PI*2*e,r=-t*i;return Math.sin(n)*Math.exp(r)}function n(t){return-2*t*t+3*t}function r(t){return-(n(1-t)-1)}function s(t){return Math.sin(2*t*Math.PI)}function a(t){return Math.sin(t*Math.PI)}function o(t,e){return Math.sin(2*t*Math.PI*e)}t.wiggle=e,t.sinWithExpDecay=i,t.pop5=n,t.pop5rev=r,t.sin=s,t.halfSin=a,t.sinWithPeriod=o}(e=t.Easing||(t.Easing={}))}(Helper||(Helper={}));var Helper;!function(t){var e=function(){function t(){}return t.create=function(e,i,n,r,s,a,o,h,l,p){return void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===p&&(p=!1),t._image=new Phaser.Image(e,0,0,r),"string"==typeof s?t._frame=e.cache.getFrameByName(r,s):t._frame=e.cache.getFrameByIndex(r,s),t.calculateNineImage(i,n,a,o,h,l,p),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,n,r,s,a,o){var h=t._frame;if(t._centralWidth=h.width-r-a,t._centralHeight=h.height-n-s,o)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=r+a+t._centralWidth*e,t._height=n+s+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var l=e-r-a;t._horizontalRepeats=Math.floor(l/t._centralWidth),t._lastWidth=l%t._centralWidth;var p=i-n-s;t._verticalRepeats=Math.floor(p/t._centralHeight),t._lastHeight=p%t._centralHeight,t._width=e,t._height=i}t._leftWidth=r,t._rightWidth=a,t._topHeight=n,t._bottomHeight=s},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var n=0;n<t._verticalRepeats;n++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,n,r){var s=t._frame.x,a=0;t._leftWidth>0&&(t._nineImage.copy(e,s,i,t._leftWidth,r,a,n),a+=t._leftWidth,s+=t._leftWidth);for(var o=0;o<t._horizontalRepeats;o++)t._nineImage.copy(e,s,i,t._centralWidth,r,a,n),a+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,s,i,t._lastWidth,r,a,n),a+=t._lastWidth),s+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,s,i,t._rightWidth,r,a,n)},t._textureKey=0,t}();t.NineImage=e}(Helper||(Helper={}));var Helper;!function(t){var e;!function(t){t[t.UNDEFINED=-1]="UNDEFINED",t[t.SPACE=1]="SPACE",t[t.NEWLINE=2]="NEWLINE",t[t.CHARACTER=3]="CHARACTER"}(e||(e={}));var i=function(){function t(){}return t.hasNext=function(){return t.textPosition<t.text.length},t.getChar=function(){return t.text.charAt(t.textPosition++)},t.peekChar=function(){return t.text.charAt(t.textPosition)},t.getPosition=function(){return t.textPosition},t.setPosition=function(e){t.textPosition=e},t.getCharAdvance=function(e,i){var n=t.fontData.chars[e],r=n.xAdvance;return i>0&&n.kerning[i]&&(r+=n.kerning[i]),r},t.getCharType=function(t){return" "===t?e.SPACE:/(?:\r\n|\r|\n)/.test(t)?e.NEWLINE:e.CHARACTER},t.wrapText=function(i,n,r,s,a,o){t.text=n,t.setPosition(0),t.fontData=i.cache.getBitmapFont(a).font,void 0===o&&(o=t.fontData.size);var h=o/t.fontData.size,l=t.fontData.lineHeight*h,p=r/h,u=[],c=[],_=[],d=0,f=!0,m=0,g=0;u[d]=g,_[m++]=0;for(var y=s;t.hasNext();){for(var T=0,v=0,b=-1,E=e.UNDEFINED,S=e.UNDEFINED,A=p,P=-1;t.hasNext();){g=t.getPosition();var I=t.getChar();E=t.getCharType(I);var N=I.charCodeAt(0);if(E===e.SPACE)S!==e.SPACE&&(v=T),++T,A-=t.getCharAdvance(N,P);else if(E===e.CHARACTER){if(S!==e.CHARACTER&&(b=g),A-=t.getCharAdvance(N,P),0>A)break;++T}else if(E===e.NEWLINE){var O=!1;if(t.hasNext()&&(O=!0,v=T,b=t.getPosition(),g=b,A=-1,E=e.CHARACTER),O)break}S=E,P=N}y-=l,0>y&&(_[m++]=d),0>A&&E===e.CHARACTER?(0!==v?c[d]=v:c[d]=T,f=!1,0>y&&(f=!0,y=s-l),0!==v?(u[++d]=b,t.setPosition(b)):(u[++d]=g,t.setPosition(g))):t.hasNext()||(E===e.CHARACTER?c[d]=T:E===e.SPACE&&(c[d]=v))}_[m]=d+1;for(var R=[],M=1;m>=M;M++){for(var C=_[M-1],w=_[M],L=[],x=C;w>x;x++)L.push(t.text.substr(u[x],c[x]));R.push(L.join("\n"))}return R},t}();t.TextWrapper=i}(Helper||(Helper={}));var Particles;!function(t){var e=function(){function e(t,i){this.maxVelocity=e.MAX_VELOCITY,this._delay=0,this._velocity=new Phaser.Point(0,0),this._angularVelocity=0,this._friction=0,this._angularDrag=0,this._gravity=0,this._alpha=1,this._scaleChange=0,this._alphaChange=0,this._game=t}return Object.defineProperty(e.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"on",{set:function(t){this._on=t,this._visual.exists=t,this._visual.visible=t},enumerable:!0,configurable:!0}),e.prototype.remove=function(){var t=this._visual.parent;null!==t&&(t instanceof Phaser.Group?t.remove(this._visual):t.removeChild(this._visual),t=null)},e.prototype.bringToTop=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.bringToTop(this._visual)},e.prototype.sendToBack=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.sendToBack(this._visual)},Object.defineProperty(e.prototype,"textureKey",{set:function(t){this._textureKey=t},enumerable:!0,configurable:!0}),e.prototype.setScaleChange=function(t,e){void 0===e&&(e=0),this._scaleChangeType=t,this._scaleChange=e},Object.defineProperty(e.prototype,"delay",{set:function(t){this._delay=t,t>0&&(this.on=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{set:function(t){this._alpha=t,this._visual.alpha=Phaser.Math.clamp(t,0,1)},enumerable:!0,configurable:!0}),e.prototype.setAlphaChange=function(t,e){void 0===e&&(e=0),this._alphaChangeType=t,this._alphaChange=e},e.prototype.setPhysics=function(t,e,i,n,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this._velocity.setTo(t,e),this._angularVelocity=i,this._friction=n,this._angularDrag=r,this._gravity=s,this._simplePhysics=0===s&&0===n&&0===r},e.prototype.setFrame=function(t){},e.prototype.onEmit=function(t){t.add(this._visual)},e.prototype.onKill=function(t){},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._game.time.physicsElapsed;if(this._delay>0){if((this._delay-=i)>0)return!0;this.on=!0}if(this.lifetime>0&&(this.lifetime-=i)<=0)return!1;if((0!==this._velocity.x||0!==this._velocity.y)&&(this._visual.x+=this._velocity.x*i,this._visual.y+=this._velocity.y*i),0!==this._angularVelocity&&(this._visual.angle+=this._angularVelocity*i),this._simplePhysics||(this._velocity.x+=-this._friction*this._velocity.x*i,this._velocity.y+=(this._gravity-this._friction*this._velocity.y)*i,this._angularVelocity+=-this._angularDrag*this._angularVelocity*i),!e)return!0;if(this._scaleChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._scaleChangeType){case t.eParameterChangeType.IN_TIME:(this._visual.scale.x+=this._scaleChange*i)<0&&(this._visual.scale.x=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE)),(this._visual.scale.y+=this._scaleChange*i)<0&&(this._visual.scale.y=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE))}if(this._alphaChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._alphaChangeType){case t.eParameterChangeType.IN_TIME:this._alpha+=this._alphaChange*i,this._alpha<0?(this._visual.alpha=0,this._alphaChange<0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._alpha>1?(this._visual.alpha=1,this._alphaChange>0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._visual.alpha=this._alpha}return!0},e.MAX_VELOCITY=1e3,e}();t.Particle=e}(Particles||(Particles={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Particles;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setFrame=function(t){var e=this._visual;"string"==typeof t?e.frameName=t:e.frame=t},e.prototype.onCreate=function(t){var e=new Phaser.Sprite(this._game,0,0,this._textureKey);e.anchor.setTo(.5,.5),this._visual=e},e}(t.Particle);t.SpriteParticle=e}(Particles||(Particles={}));var Particles;!function(t){var e=function(t){function e(e,i){t.call(this,e,i),(void 0===i||null!==i)&&(this._anims=i[0])}return __extends(e,t),e.prototype.onCreate=function(e){t.prototype.onCreate.call(this,e);for(var i=this._visual,n=0;n<this._anims.length;n++){var r=this._anims[n],s=i.animations.add(r.name,r.frames,r.frameRate,r.loop);!r.loop&&r.killOnComplete&&(s.killOnComplete=!0)}},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._delay,n=t.prototype.update.call(this,e);return i>0&&this._delay<=0&&this._visual.animations.currentAnim.play(),n},e.prototype.setFrame=function(t){this.setAnim(t)},e.prototype.setAnim=function(t){var e=this._visual;e.animations.stop(null,!0),this._delay<=0?e.animations.play(t):(e.animations.currentAnim=e.animations.getAnimation(t),e.frame=e.animations.currentAnim._frames[0])},e.prototype.setRandomAnim=function(){var t=(this._visual,this._anims[this._game.rnd.integerInRange(0,this._anims.length-1)].name);this.setAnim(t)},e}(t.SpriteParticle);t.AnimatedParticle=e}(Particles||(Particles={}));var Particles;!function(t){var e=function(){function e(e){this.area=new Phaser.Point(0,0),this.gravity=0,this.minLifetime=1,this.maxLifetime=1,this.delay=0,this.minScale=1,this.maxScale=1,this.scaleChange=0,this.scaleChangeType=t.eParameterChangeType.NO_CHANGE,this.minAngle=0,this.maxAngle=0,this.minSpeedX=0,this.maxSpeedX=0,this.minSpeedY=0,this.maxSpeedY=0,this.friction=0,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.angularDrag=0,this.minAlpha=1,this.maxAlpha=1,this.alphaChange=0,this.alphaChangeType=t.eParameterChangeType.NO_CHANGE,this.frames=null,this._minAdvScale=new Phaser.Point(1,1),this._maxAdvScale=new Phaser.Point(1,1),this._game=e}return e.readParams=function(t,i){var n={};for(var r in i){var s=new e(t);e.doReadParams(s,i,r),n[r]=s}return n},e.doReadParams=function(t,i,n){var r=i[n];if("undefined"!=typeof r.parent&&null!==r.parent){var s=r.parent;e.doReadParams(t,i,s)}for(var a in r)"parent"!==a&&("undefined"==typeof t[a],t[a]=r[a])},e.prototype.clear=function(){this.gravity=0,this.setXSpeed(0,0),this.setYSpeed(0,0),this.setAngularSpeed(0)},e.prototype.randomFrame=function(){var t=null;return null!==this.frames&&(t=Array.isArray(this.frames)?"string"==typeof this.frames[0]?this._game.rnd.pick(this.frames):this._game.rnd.pick(this.frames):this.frames),t},e.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedX=t,this.maxSpeedX=e},e.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedY=t,this.maxSpeedY=e},e.prototype.setAngularSpeed=function(t,e){t=t||0,e=e||0,this.minAngularSpeed=t,this.maxAngularSpeed=e},e.prototype.setAlpha=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this.minAlpha=t,this.maxAlpha=e},e.prototype.setAlphaChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.alphaChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.alphaChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.alphaChange=i/n}},e.prototype.setScale=function(t,e){t=t||0,e=e||0,this.minScale=t,this.maxScale=e},Object.defineProperty(e.prototype,"advScaleMin",{get:function(){return this._minAdvScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advScaleMax",{get:function(){return this._maxAdvScale},enumerable:!0,configurable:!0}),e.prototype.setAdvScale=function(t,e,i,n){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),this._minAdvScale.setTo(t,i),this._maxAdvScale.setTo(e,n)},e.prototype.setScaleChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.scaleChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.scaleChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.scaleChange=i/n}},e.prototype.setAngle=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.minAngle=t,this.maxAngle=e},e}();t.ParticleParams=e}(Particles||(Particles={}));var Particles;!function(t){var e;!function(t){t[t.NONE=0]="NONE",t[t.FLOW=1]="FLOW",t[t.EXPLODE=2]="EXPLODE"}(e||(e={})),function(t){t[t.NO_CHANGE=0]="NO_CHANGE",t[t.IN_TIME=1]="IN_TIME"}(t.eParameterChangeType||(t.eParameterChangeType={}));var i=t.eParameterChangeType,n=function(n){function r(i,s,a,o){n.call(this,i,null),this._maxParticles=r.MAX_PARTICELES,this.emitPoint=new Phaser.Point(0,0),this.emitObject=null,this.particleClass=t.SpriteParticle,this.particleBringToTop=!1,this.particleSendToBack=!1,this.frequency=100,this.forceEmit=!1,this._alternativeParams=null,this._on=!1,this._mode=e.NONE,this._flowQuantity=0,this._flowTotal=0,this._flowCounter=0,this._particlesPool=[],this._counterPool=0,this._particlesUsed=[],this._counterUsed=0,this._timer=0,this._emitPoint=new Phaser.Point(0,0),this._params=new t.ParticleParams(i),this.position.setTo(s,a),this._maxParticles=o}return __extends(r,n),Object.defineProperty(r.prototype,"params",{set:function(t){this._params=t},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this._params.clear()},r.prototype.update=function(){if(this._on&&this.game.time.time>=this._timer&&(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,this._mode===e.FLOW))if(-1!==this._flowTotal&&this._flowCounter>=this._flowTotal)this.stopFlow();else for(var t=Math.max(1,this._flowQuantity),i=0;t>i&&!(this.emitParticle(this.forceEmit)&&(this._flowCounter++,-1!==this._flowTotal&&this._flowCounter>=this._flowTotal));i++);for(var i=this._counterUsed-1;i>=0;i--){var n=this._particlesUsed[i];n.update()||(n.on=!1,n.remove(),n.onKill(this),this._particlesUsed[i]=this._particlesUsed[--this._counterUsed],this._particlesPool[this._counterPool++]=n)}},r.prototype.makeParticles=function(t,e,i,n){(void 0===i||i>this._maxParticles)&&(i=this._maxParticles),void 0!==e&&(this._params.frames=e);for(var r=0;i>r;r++){var s=new this.particleClass(this.game,n);s.textureKey=t,s.onCreate(this),s.on=!1,this._particlesPool[this._counterPool++]=s}},Object.defineProperty(r.prototype,"on",{set:function(t){this._on=t,this.exists=t,this.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._counterUsed},enumerable:!0,configurable:!0}),r.prototype.explode=function(t,i,n){this._mode=e.EXPLODE,this.on=!0,this.emitParticles(t,i,n)},r.prototype.flow=function(t,i,n,r,s,a){this._mode=e.FLOW,this.on=!0,(void 0===i||0===i)&&(i=1),void 0===n&&(n=-1),void 0===r&&(r=!0),i>this._maxParticles&&(i=this._maxParticles),this.frequency=t,this._flowCounter=0,this._flowQuantity=i,this._flowTotal=n,r&&(this.emitParticles(i,s,a),this._flowCounter+=i,this._timer=this.game.time.time+t*this.game.time.slowMotion)},r.prototype.stopFlow=function(){this._mode=e.NONE},r.prototype.killAllParticles=function(t){for(void 0===t&&(t=!0);this._counterUsed>0;){var e=this._particlesUsed[--this._counterUsed];e.remove(),t||e.onKill(this),this._particlesPool[this._counterPool++]=e}},r.prototype.emitParticles=function(t,e,i){for(var n=0;t>n;n++){var r=this.emitParticle(this.forceEmit);if(null===r)break;void 0!==e&&null!==e&&e.call(i,r)}},r.prototype.emitParticle=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),0===this._counterPool){if(!t)return null;var n=this._particlesUsed[0];this._particlesUsed[0]=this._particlesUsed[--this._counterUsed],n.remove(),n.onKill(this),this._particlesPool[this._counterPool++]=n}var r=this._particlesPool[--this._counterPool];this._particlesUsed[this._counterUsed++]=r,r.on=!0;var s=null!==this._alternativeParams?this._alternativeParams:this._params;if(this.randomEmitPoint(this._emitPoint,s),r.visual.position.set(this._emitPoint.x,this._emitPoint.y),r.visual.angle=0,e)r.lifetime=-1,r.visual.scale.set(1,1),r.setScaleChange(i.NO_CHANGE),r.visual.angle=0,r.alpha=1,r.setAlphaChange(i.NO_CHANGE),r.setPhysics();else{if(r.lifetime=this.game.rnd.realInRange(s.minLifetime,s.maxLifetime),r.delay=s.delay,1!==s.minScale||1!==s.maxScale){var a=this.game.rnd.realInRange(s.minScale,s.maxScale);r.visual.scale.set(a,a)}else s.advScaleMin.x!==s.advScaleMax.x||s.advScaleMin.y!==s.advScaleMax.y?r.visual.scale.set(this.game.rnd.realInRange(s.advScaleMin.x,s.advScaleMax.x),this.game.rnd.realInRange(s.advScaleMin.y,s.advScaleMax.y)):r.visual.scale.set(1,1);r.setScaleChange(s.scaleChangeType,s.scaleChange),r.visual.angle=s.minAngle===s.maxAngle?s.minAngle:this.game.rnd.realInRange(s.minAngle,s.maxAngle),r.alpha=this.game.rnd.realInRange(s.minAlpha,s.maxAlpha),r.setAlphaChange(s.alphaChangeType,s.alphaChange),r.setPhysics(this.game.rnd.realInRange(s.minSpeedX,s.maxSpeedX),this.game.rnd.realInRange(s.minSpeedY,s.maxSpeedY),this.game.rnd.realInRange(s.minAngularSpeed,s.maxAngularSpeed),s.friction,s.angularDrag,s.gravity),null!==s.frames&&r.setFrame(s.randomFrame())}return r.onEmit(this),this.particleBringToTop?r.bringToTop():this.particleSendToBack&&r.sendToBack(),r},r.prototype.destroy=function(){t.ParticlesManager.instance.remove(this),n.prototype.destroy.call(this,!0,!1)},r.prototype.randomEmitPoint=function(t,e){return e.area instanceof Phaser.Point?t.setTo(0,0):e.area.random(t),t.x+=this.emitPoint.x,t.y+=this.emitPoint.y,null!==this.emitObject&&(t.x+=this.emitObject.x,t.y+=this.emitObject.y),t},Object.defineProperty(r.prototype,"area",{set:function(t){this._params.area=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gravity",{set:function(t){this._params.gravity=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"friction",{set:function(t){this._params.friction=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"angularDrag",{set:function(t){this._params.angularDrag=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minScale",{set:function(t){this._params.minScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxScale",{set:function(t){this._params.maxScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minAngle",{set:function(t){this._params.minAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxAngle",{set:function(t){this._params.maxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lifetime",{set:function(t){this._params.minLifetime=this._params.maxLifetime=t},enumerable:!0,configurable:!0}),r.prototype.setXSpeed=function(t,e){this._params.setXSpeed(t,e)},r.prototype.setYSpeed=function(t,e){this._params.setYSpeed(t,e)},r.prototype.setAngularSpeed=function(t,e){this._params.setAngularSpeed(t,e)},r.prototype.setAlpha=function(t,e){this._params.setAlpha(t,e)},r.prototype.setAlphaChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setAlphaChange(t,e,i)},r.prototype.setScale=function(t,e){this._params.setScale(t,e)},r.prototype.setAdvScale=function(t,e,i,n){this._params.setAdvScale(t,e,i,n)},r.prototype.setScaleChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setScaleChange(t,e,i)},r.prototype.setAngle=function(t,e){this._params.setAngle(t,e)},r.prototype.emitAt=function(t,e){this.emitPoint.setTo(t,e)},r.prototype.emitAtObject=function(t){t.center?this.emitPoint.setTo(t.center.x,t.center.y):this.emitPoint.setTo(t.x,t.y)},r.MAX_PARTICELES=16,r}(Phaser.Group);t.ParticlesEmitter=n}(Particles||(Particles={}));var Particles;!function(t){var e=function(){function t(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this._emitter=null,this._game=t,this._emitter=e,this._animEmitter=i,this._params=n}return t.prototype.emit=function(t,e,i,n,r){for(this._emitter.emitAt(t,e),null!==this._animEmitter&&this._animEmitter.emitAt(t,e);null!==i;){var s=i.animated?this._animEmitter:this._emitter;if(null===this._params&&null!==i.paramsName,null!==this._params){var a=this._params[i.paramsName];"undefined"==typeof a||(s.params=a)}s.explode(this._game.rnd.integerInRange(i.countMin,i.countMax),n,r),i=i.next}},t}();t.ParticleChain=e}(Particles||(Particles={}));var Particles;!function(t){var e=function(){function t(){this._emitters=[],this._emittersCount=0}return Object.defineProperty(t,"instance",{get:function(){return null===t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this._emitters[this._emittersCount++]=t},t.prototype.remove=function(t){for(var e=this._emittersCount-1;e>=0&&this._emitters[e]!==t;e--);-1!==e&&(this._emitters[e]=this._emitters[--this._emittersCount])},t.prototype.update=function(){for(var t=0;t<this._emittersCount;t++){var e=this._emitters[t];e.exists&&e.update()}},t._instance=null,t}();t.ParticlesManager=e}(Particles||(Particles={}));var Ridhwan;!function(t){var e=function(){function t(){}return t.GRAVITY=800,t.THRUST=2400,t.SPEED_X=200,t.TUNNEL_RIM=50,t.TUNNEL_CIRCLE_RADIUS=290,t.TUNNEL_CIRCLE_RADIUS_SQUARED=t.TUNNEL_CIRCLE_RADIUS*t.TUNNEL_CIRCLE_RADIUS,t.TUNNEL_HEIGHT_HALF=150,t.TUNNEL_HEIGHT_MIN_HALF=100,t.TUNNEL_HEIGHT_MIN_HALF_AT_SCREEN=20,t.TUNNEL_Y_STEP_MIN=100,t.TUNNEL_Y_STEP_MAX=200,t.TUNNEL_Y_STEP_TO_MAX_DISTANCE=6400,t.TUNNEL_X_STEP_MAX=250,t.TUNNEL_X_STEP_MIN=100,t.TUNNEL_X_STEP_TO_MIN_DISTANCE=6400,t.BONUS_PROB=4,t.BONUSES_TO_BOOST=10,t.BLOOD_TIME=1e3,t.BAR_TIME_MAX=1e4,t.BAR_TIME_CANDY_ADD=3e3,t.BAR_TIME_HURT_SUB_ONETIME=2e3,t.BAR_TIME_HURT_NEXT_TIME=250,t.BAR_TIME_DECREASE_MULTIPLIER=.5,t.BOOST_TIME=4e3,t.BOOST_ENTRANCE_TIME=500,t.AFTER_BOOST_TIME=1e3,t.BOOST_MOVE_MULTIPLIER=3,t}();t.Gameplay=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=null),this.name="<no name>",this.debug=0,this._newFunction=null,this._count=0,this._pool=[],this._canGrow=!0,this._poolSize=0,this._classType=t,this._newFunction=i;for(var n=0;e>n;n++){var r=this.newItem();this._pool[this._count++]=r}this._poolSize=e}return t.prototype.createItem=function(){return 0===this._count?((this.debug&t.DEBUG_ALLOCATION)>0,this._canGrow?this.newItem():null):((this.debug&t.DEBUG_CREATE)>0,this._pool[--this._count])},t.prototype.destroyItem=function(e){(this.debug&t.DEBUG_DESTROY)>0,this._pool[this._count++]=e},Object.defineProperty(t.prototype,"newFunction",{set:function(t){this._newFunction=t},enumerable:!0,configurable:!0}),t.prototype.newItem=function(){return null!==this._newFunction?this._newFunction():new this._classType},Object.defineProperty(t.prototype,"canGrow",{set:function(t){this._canGrow=t},enumerable:!0,configurable:!0}),t.DEBUG_ALLOCATION=1,t.DEBUG_CREATE=2,t.DEBUG_DESTROY=4,t.DEBUG_ALL=7,t}();t.Pool=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(t){function e(e,i,n,r,s){t.call(this,e,i,n,r),void 0!==s&&this.setAnchoredFrame(s)}return __extends(e,t),e.prototype.setAnchoredFrame=function(t){if("string"==typeof this.key){var e=null;"string"==typeof t?(this.frameName=t,e=this.game.cache.getFrameByName(this.key,t)):(this.frame=t,e=this.game.cache.getFrameByIndex(this.key,t)),void 0!==e.anchorX&&void 0!==e.anchorY&&this.anchor.setTo(e.anchorX,e.anchorY)}},e}(Phaser.Sprite);t.AnchoredSprite=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(e){function i(t,i){e.call(this,t,i);var n=t.add.sprite(0,0,"Sprites","BarBg",this);n.anchor.set(.5,.5);var r=t.add.sprite(0,0,"Sprites","Bar",this);r.anchor.set(.5,.5),this._barWidth=r.width,this._barCrop=new Phaser.Rectangle(0,0,0,r.height),r.crop(this._barCrop,!1),this._bar=r,this.fixedToCamera=!0,this.cameraOffset.set(t.width/2,25),this.setValue(0)}return __extends(i,e),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),i.prototype.setValue=function(e){e=e=Phaser.Math.clamp(e,0,t.Gameplay.BAR_TIME_MAX),this._barCrop.width=e/t.Gameplay.BAR_TIME_MAX*this._barWidth,this._bar.updateCrop(),this._value=e},i.prototype.adjustValue=function(t){this.setValue(this._value+t)},i}(Phaser.Group);t.Bar=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(t){function e(e,i,n,r,s,a){t.call(this,e,i),this._scrollCoef=a;var o;o="number"==typeof r?e.cache.getFrameByIndex(n,r):e.cache.getFrameByName(n,r),this._frame=o;var h=e.add.sprite(0,0,n,r,this);h.anchor.y=s,h.fixedToCamera=!0,this._sprite1Crop=new Phaser.Rectangle(0,0,0,o.height),h.crop(this._sprite1Crop,!1),this._sprite1=h,h=e.add.sprite(0,0,n,r,this),h.fixedToCamera=!0,h.anchor.y=s,this._sprite2Crop=new Phaser.Rectangle(0,0,0,o.height),h.crop(this._sprite2Crop,!1),this._sprite2=h}return __extends(e,t),e.prototype.updatePosition=function(t){t*=this._scrollCoef,0>t&&(t+=640);var e=this._frame.width,i=Math.floor(t)%e;this._sprite1Crop.x=i,this._sprite1Crop.width=Math.min(e-i,this.game.width),this._sprite1.updateCrop(),this._sprite2Crop.width=this.game.width-this._sprite1Crop.width,this._sprite2.cameraOffset.x=this._sprite1Crop.width,this._sprite2.updateCrop()},e}(Phaser.Group);t.BgLayer=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function e(e,i,n){this._tunnel=[],this._l=new Phaser.Line,this._c=new Phaser.Circle,this._r=new Phaser.Rectangle(0,0,10,10),this._game=e,this._obstaclePools=new t.ObstaclesPools(e,i,n),this._obstaclesLayer=new Phaser.Group(e,null),this._bonusLayer=new Phaser.Group(e,null),this.reset()}return e.prototype.render=function(){if(!(this._tunnelTop<2))for(var e=0;e<this._tunnelTop-1;e++){var i=this._tunnel[e],n=this._tunnel[e+1];this._l.setTo(i.x,i.y-i.widthHalf,n.x,n.y-n.widthHalf),this._game.debug.geom(this._l,"RGBA(0,255,0,1)"),this._l.setTo(i.x,i.y+i.widthHalf,n.x,n.y+n.widthHalf),this._game.debug.geom(this._l,"RGBA(0,255,0,1)"),i.circle&&(this._c.setTo(i.x,i.y,2*t.Gameplay.TUNNEL_CIRCLE_RADIUS),this._game.debug.geom(this._c,"RGBA(0,255,0,1)",!1)),e+1===this._tunnelTop-1&&n.circle&&(this._c.setTo(n.x,n.y,2*t.Gameplay.TUNNEL_CIRCLE_RADIUS),this._game.debug.geom(this._c,"RGBA(0,255,0,1)",!1)),this._r.x=i.x,this._r.y=i.y,this._game.debug.geom(this._r,"RGBA(0,255,0,1)",!1)}},Object.defineProperty(e.prototype,"obstaclesLayer",{get:function(){return this._obstaclesLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bonusLayer",{get:function(){return this._bonusLayer},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._tunnelHeightHalf=t.Gameplay.TUNNEL_HEIGHT_HALF,this._tunnelXStep=t.Gameplay.TUNNEL_X_STEP_MAX,this._tunnelYStep=t.Gameplay.TUNNEL_Y_STEP_MIN,this._tunnelTop=0,this.pushTunnelParams(0,this._game.height/2,this._tunnelHeightHalf,!1),this.pushTunnelParams(320,this._game.height/2,this._tunnelHeightHalf,!1),this._topObstacleX=this._game.rnd.integerInRange(-50,50),this._bottomObstacleX=this._game.rnd.integerInRange(-50,50),this._lastObstacleX=0,this._bonusProbability=t.Gameplay.BONUS_PROB,this._bonusesGenerated=0,this._lastBonusX=200,this.removeObstacles(0,!0),this.removeBonuses(0,!0)},e.prototype.pushTunnelParams=function(e,i,n,r){i-n<t.Gameplay.TUNNEL_RIM?i=t.Gameplay.TUNNEL_RIM+n:i+n>this._game.height-t.Gameplay.TUNNEL_RIM&&(i=this._game.height-t.Gameplay.TUNNEL_RIM-n);var s=this._tunnelTop;("undefined"==typeof this._tunnel[s]||null===this._tunnel[s])&&(this._tunnel[s]=new t.TunnelParams);
var a=this._tunnel[s];a.set(e,i,n,r),++this._tunnelTop},e.prototype.removeTunnelParams=function(t){for(var e=0;e<this._tunnelTop&&this._tunnel[e].x<t-1e3;)++e;if(--e,e>0){for(var i=e,n=0;i<this._tunnelTop;i++,n++)this._tunnel[n].copyFrom(this._tunnel[i]);this._tunnelTop-=e}},e.prototype.removeObstacles=function(t,e){for(var i=this._obstaclesLayer.length-1;i>=0;i--){var n=this._obstaclesLayer.getChildAt(i);(n.x<t-200||e)&&(this._obstaclesLayer.remove(n),n.exists=!1,0===n.tag?this._obstaclePools.bottom.destroy(n):1===n.tag?this._obstaclePools.top.destroy(n):2===n.tag&&this._obstaclePools.center.destroy(n))}},e.prototype.removeBonuses=function(t,e){for(var i=this._bonusLayer.length-1;i>=0;i--){var n=this._bonusLayer.getChildAt(i);(n.x<t-200||n.remove||e)&&(this._bonusLayer.remove(n),n.exists=!1,3===n.tag?this._obstaclePools.bonus.destroy(n):4===n.tag&&this._obstaclePools.boost.destroy(n))}},e.prototype.updateDifficulty=function(e){var i=e;e=Phaser.Math.clamp(e,0,t.Gameplay.TUNNEL_X_STEP_TO_MIN_DISTANCE),this._tunnelXStep=Math.floor(Phaser.Math.mapLinear(e,0,t.Gameplay.TUNNEL_X_STEP_TO_MIN_DISTANCE,t.Gameplay.TUNNEL_X_STEP_MAX,t.Gameplay.TUNNEL_X_STEP_MIN)),e=i,e=Phaser.Math.clamp(i,0,t.Gameplay.TUNNEL_Y_STEP_TO_MAX_DISTANCE),this._tunnelYStep=Math.floor(Phaser.Math.mapLinear(e,0,t.Gameplay.TUNNEL_Y_STEP_TO_MAX_DISTANCE,t.Gameplay.TUNNEL_Y_STEP_MIN,t.Gameplay.TUNNEL_Y_STEP_MAX)),e=i,e=Phaser.Math.clamp(e,0,t.Gameplay.TUNNEL_HEIGHT_MIN_HALF_AT_SCREEN),this._tunnelHeightHalf=Math.floor(Phaser.Math.mapLinear(e,0,t.Gameplay.TUNNEL_HEIGHT_MIN_HALF_AT_SCREEN,t.Gameplay.TUNNEL_HEIGHT_HALF,t.Gameplay.TUNNEL_HEIGHT_MIN_HALF))},e.prototype.generate=function(t,e){this.removeTunnelParams(t),this.generateTunnel(t),this.removeObstacles(t,!1),this.removeBonuses(t,!1),this.generateObjects(t,e)},e.prototype.generateTunnel=function(t){for(;this._tunnel[this._tunnelTop-1].x<t+this._game.width+320;)this.updateDifficulty(this._tunnel[this._tunnelTop-1].x),this.generateTunnelNode()},e.prototype.generateTunnelNode=function(){var e=this._game.rnd.integerInRange(0,99)<30,i=this._tunnelTop>0&&this._tunnel[this._tunnelTop-1].circle,n=e||i?2*t.Gameplay.TUNNEL_X_STEP_MAX:this._game.rnd.integerInRange(this._tunnelXStep,t.Gameplay.TUNNEL_X_STEP_MAX),r=this._game.rnd.integerInRange(t.Gameplay.TUNNEL_Y_STEP_MIN,this._tunnelYStep);r*=this._game.rnd.sign();var s=this._tunnel[this._tunnelTop-1];this.pushTunnelParams(s.x+n,s.y+r,this._tunnelHeightHalf,e)},e.prototype.generateObjects=function(e,i){for(;this._bottomObstacleX<e+this._game.width+200;){var n=this._bottomObstacleX,r=this._obstaclePools.bottom.create();if(null===r){this._bottomObstacleX+=200;break}"Prekazka0"!==r.frameName&&r.setRotation(this._game.rnd.integerInRange(-15,15));var s=r.getTransformedTouchPoint(),a=Math.max(this.getTunnelY(n+s.x,!0)-s.y,this._game.height);r.setPosition(n,a),r.exists=!0,this._obstaclesLayer.addChildAt(r,this._game.rnd.integerInRange(0,this._obstaclesLayer.length-1)),this._bottomObstacleX+=this._game.rnd.integerInRange(100,300)}for(;this._topObstacleX<e+this._game.width+200;){var n=this._topObstacleX,r=this._obstaclePools.top.create();if(null===r){this._topObstacleX+=200;break}r.setRotation(180+this._game.rnd.integerInRange(-15,15));var s=r.getTransformedTouchPoint(),a=Math.min(this.getTunnelY(n+s.x,!1)-s.y,0);r.setPosition(n,a),r.exists=!0,this._obstaclesLayer.addChildAt(r,this._game.rnd.integerInRange(0,this._obstaclesLayer.length-1)),this._topObstacleX+=this._game.rnd.integerInRange(100,300)}for(var o=this._tunnelTop-1;o>=0&&!this._tunnel[o].centerCheck;){var h=this._tunnel[o];if(h.centerCheck=!0,h.circle&&h.x-this._lastObstacleX>200){var n=h.x+this._game.rnd.integerInRange(-20,20),a=h.y+this._game.rnd.integerInRange(-20,20);this._lastObstacleX=n;var r=this._obstaclePools.center.create();null===r||(r.setRotation(this._game.rnd.integerInRange(-30,30)+(-1===this._game.rnd.sign()?180:0)),r.setPosition(n,a),r.exists=!0,this._obstaclesLayer.addChildAt(r,this._game.rnd.integerInRange(0,this._obstaclesLayer.length-1)))}var l=o>=1&&h.circle&&this._tunnel[o-1].circle;if((!h.circle||l)&&h.x>200&&!i){var n=l?(h.x+this._tunnel[o-1].x)/2:h.x,a=l?(h.y+this._tunnel[o-1].y)/2:h.y;if(0===this._game.rnd.integerInRange(0,this._bonusProbability)||n-this._lastBonusX>this._game.width||l){n+=this._game.rnd.integerInRange(-40,40),a+=this._game.rnd.integerInRange(.8*-h.widthHalf,.8*h.widthHalf);var p=null;this._bonusesGenerated>=t.Gameplay.BONUSES_TO_BOOST?(this._bonusesGenerated=0,p=this._obstaclePools.boost.create()):(++this._bonusesGenerated,p=this._obstaclePools.bonus.create()),null!==p&&(p.remove=!1,p.setRotation(this._game.rnd.integerInRange(-10,10)),p.setPosition(n,a),p.exists=!0,this._bonusLayer.add(p))}--this._bonusProbability<0&&(this._bonusProbability=t.Gameplay.BONUS_PROB)}--o}},e.prototype.getTunnelY=function(e,i){this._tunnel[this._tunnelTop-1].x<=e&&this.generateTunnelNode(),0>e&&(e=0);for(var n=this._tunnelTop-1;this._tunnel[n].x>e;)--n;var r=this._tunnel[n].x,s=this._tunnel[n+1].x,a=this._tunnel[n].y+this._tunnel[n].widthHalf*(i?1:-1),o=this._tunnel[n+1].y+this._tunnel[n+1].widthHalf*(i?1:-1),h=Phaser.Math.mapLinear(e,r,s,a,o);if(this._tunnel[n].circle&&e<r+t.Gameplay.TUNNEL_CIRCLE_RADIUS){var l=e-r,p=h-this._tunnel[n].y;l*l+p*p<t.Gameplay.TUNNEL_CIRCLE_RADIUS_SQUARED&&(h=this._tunnel[n].y+Math.sqrt(t.Gameplay.TUNNEL_CIRCLE_RADIUS_SQUARED-l*l)*(i?1:-1))}if(this._tunnel[n+1].circle&&e>s-t.Gameplay.TUNNEL_CIRCLE_RADIUS){var l=e-s,p=h-this._tunnel[n+1].y;l*l+p*p<t.Gameplay.TUNNEL_CIRCLE_RADIUS_SQUARED&&(h=this._tunnel[n+1].y+Math.sqrt(t.Gameplay.TUNNEL_CIRCLE_RADIUS_SQUARED-l*l)*(i?1:-1))}return h},e}();t.Generator=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(t){function e(){t.apply(this,arguments),this._savePosition=new Phaser.Point(0,0),this._saveScale=1}return __extends(e,t),e.prototype.setColliders=function(t,e,i){this._saveScale=e;var n=this.body,r=(.5-this.anchor.x)*this.width*(i?-1:1),s=(.5-this.anchor.y)*this.height;n.clearShapes();for(var a=0;a<t.length;a++){var o=t[a];switch(o.type){case"circle":var h=o.data;n.addCircle(h.radius*e,(i?this.width-h.x:h.x)*e-this.width/2+r,h.y*e-this.height/2+s);break;case"rect":var h=o.data;n.addRectangle(h.width*e,h.height*e,(i?this.width-h.x-h.width/2:h.x+h.width/2)*e-this.width/2+r,(h.y+h.height/2)*e-this.height/2+s);break;case"poly":var l=o.data.points,p=[];if(i)for(var u=l.length-2,c=0;u>=0;u-=2,c+=2)p[c]=(this.width-l[u])*e+r,p[c+1]=l[u+1]*e+s;else for(var _=0;_<l.length;_+=2)p[_]=l[_]*e+r,p[_+1]=l[_+1]*e+s;var d=[{shape:p}];n.loadPolygon(null,d)}}},e.prototype.setPosition=function(t,e){var i=this.body;i.x=t,i.y=e,this._savePosition.set(t,e)},e.prototype.setRotation=function(t){var e=this.body;e.angle=t},e.prototype.setCollisionGroup=function(t){this.body.setCollisionGroup(t)},e.prototype.collides=function(t,e,i){this.body.collides(t,e,i)},e}(Phaser.Sprite);t.P2Sprite=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(e){function i(n,r){e.call(this,n,0,0,"Sprites","RidhwanEmpty"),this._parentState=r;var s=n.physics.p2;s.enable(this,t.Play.DEBUG),this.anchor.set(.5,.5),this.scale.set(i.SCALE,i.SCALE),this.setColliders(i.COLLISIONS,i.SCALE,!1);var a=this.body;a.fixedRotation=!0;var o=new Spriter.SpriterGroup(n,t.Global.spriterPonik,"Sprites","entity_000",0);this.addChild(o),this._pony=o,this._shield=new Phaser.Sprite(n,20,0,"Sprites","Shield"),this._shield.anchor.y=.5,this._shield.visible=!1,this.addChild(this._shield)}return __extends(i,e),Object.defineProperty(i.prototype,"pony",{get:function(){return this._pony},enumerable:!0,configurable:!0}),i.prototype.move=function(e,i){var n=this.body;e&&n.thrust(t.Gameplay.THRUST),n.moveRight(t.Gameplay.SPEED_X*i)},i.prototype.postUpdate=function(){if(e.prototype.postUpdate.call(this),this._pony.updateAnimation(),this._parentState.safeTime>this.game.time.time)this.body.data.velocity[1]=0;else if(!this._parentState.gameOver){var t=this.body;t.y>this.game.height?(t.y=this.game.height,t.data.velocity[1]=0):t.y<0&&(t.y=0,t.data.velocity[1]=0)}},i.prototype.updateShield=function(t){return 0>=t?void(this._shield.visible=!1):(this._shield.visible||(this._shield.visible=!0),this._shield.alpha=t,void this._shield.scale.set(t,1.34*t))},i.SCALE=.75,i.COLLISIONS=[{type:"circle",data:{radius:29,x:97,y:51}},{type:"rect",data:{width:49,height:42,x:105,y:12}},{type:"rect",data:{width:81,height:48,x:50,y:55}}],i}(t.P2Sprite);t.Player=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e={Prekazka0:{collisions:[{type:"poly",data:{points:[153,9,212,107,225,178,199,232,148,53]}},{type:"poly",data:{points:[147,54,198,233,168,353,92,353,105,91]}},{type:"poly",data:{points:[105,91,92,353,40,163,42,132]}}],touchPoint:{x:25,y:-330}},Prekazka1:{collisions:[{type:"circle",data:{radius:60,x:175,y:73}},{type:"rect",data:{width:36,height:81,x:202,y:79}},{type:"rect",data:{width:37,height:278,x:113,y:76}}],touchPoint:{x:50,y:-323}},Prekazka2:{collisions:[{type:"circle",data:{radius:59,x:169,y:70}},{type:"rect",data:{width:38,height:94,x:196,y:71}},{type:"rect",data:{width:38,height:287,x:109,y:68}}],touchPoint:{x:44,y:-321}},Prekazka3:{collisions:[{type:"circle",data:{radius:74,x:130,y:80}},{type:"rect",data:{width:17,height:152,x:122,y:154}}],touchPoint:{x:-9,y:-290}},Prekazka4:{collisions:[{type:"circle",data:{radius:54,x:92,y:72}},{type:"circle",data:{radius:46,x:173,y:70}},{type:"poly",data:{points:[218,85,207,126,137,210,121,210,67,148,41,85]}},{type:"rect",data:{width:17,height:182,x:121,y:210}}],touchPoint:{x:4,y:-350}},Prekazka5:{collisions:[{type:"circle",data:{radius:62,x:129,y:70}},{type:"circle",data:{radius:62,x:129,y:95}},{type:"rect",data:{width:17,height:200,x:122,y:157}}],touchPoint:{x:0,y:-330}},Letajici0:{collisions:[{type:"circle",data:{radius:35,x:255,y:102}},{type:"circle",data:{radius:35,x:253,y:159}},{type:"poly",data:{points:[245,66,245,191,203,173,150,128,203,83]}},{type:"rect",data:{width:131,height:8,x:23,y:125}}],touchPoint:{x:130,y:0}},Letajici1:{collisions:[{type:"circle",data:{radius:57,x:186,y:115}},{type:"rect",data:{width:120,height:11,x:11,y:111}}],touchPoint:{x:123,y:0}},Letajici2:{collisions:[{type:"circle",data:{radius:45,x:248,y:105}},{type:"circle",data:{radius:45,x:275,y:105}},{type:"rect",data:{width:177,height:11,x:27,y:100}}],touchPoint:{x:144,y:0}},Bonus0:{collisions:[{type:"circle",data:{radius:35,x:67,y:71}}],touchPoint:{x:0,y:0},scale:.75},Bonus1:{collisions:[{type:"circle",data:{radius:45,x:67,y:71}}],touchPoint:{x:0,y:0},scale:.75},Bonus2:{collisions:[{type:"circle",data:{radius:27,x:47,y:91}},{type:"circle",data:{radius:27,x:87,y:51}}],touchPoint:{x:0,y:0},scale:.75},Boost:{collisions:[{type:"circle",data:{radius:56,x:76,y:71}}],touchPoint:{x:0,y:0},scale:.75}},i=function(i){function n(n,r,s,a){i.call(this,n,0,0,"Sprites",r),this._touchPoint=new Phaser.Point,this._hlpPoint=new Phaser.Point,this._remove=!1,this._tag=a;var o=n.cache.getFrameByName("Sprites",r),h=n.physics.p2;h.enable(this,t.Play.DEBUG);var l=e[r];if("undefined"!=typeof l){var p="undefined"!=typeof l.scale?l.scale:1;this.anchor.set(o.anchorX,o.anchorY),this.scale.set(p,p),this.setColliders(l.collisions,p,s);var u=this.body;u["static"]=!0,s&&(this.scale.x=-1),this._touchPoint.set(l.touchPoint.x,l.touchPoint.y)}}return __extends(n,i),Object.defineProperty(n.prototype,"tag",{get:function(){return this._tag},enumerable:!0,configurable:!0}),n.prototype.getTransformedTouchPoint=function(){return this._hlpPoint.copyFrom(this._touchPoint),this.scale.x<0&&(this._hlpPoint.x*=-1),this._hlpPoint.rotate(0,0,this.body.angle,!0),this._hlpPoint},Object.defineProperty(n.prototype,"remove",{get:function(){return this._remove},set:function(t){this._remove=t},enumerable:!0,configurable:!0}),n.prototype.offset=function(){var t=(this.game.time.time+13*this._savePosition.x)%5e3/5e3,e=10*Helper.Easing.wiggle(t,1,2),i=10*Helper.Easing.wiggle(t,2,2),n=this.body;n.x=this._savePosition.x+e,n.y=this._savePosition.y+i,t=(this.game.time.time+13*this._savePosition.x)%500/500;var r=(1+.1*Math.sin(2*t*Math.PI))*this._saveScale;this.scale.set(r,r)},n}(t.P2Sprite);t.Obstacle=i}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function e(e,i,n,r,s){this._obstacles=[],this._game=e;for(var a=0;a<i.length;a++){var o=i[a],h=new t.Obstacle(e,o.name,o.flip,n);"undefined"!=typeof r&&null!==r&&r.call(s,h),this._obstacles.push(h)}this._obstacleMax=i.length}return e.prototype.create=function(){if(0===this._obstacleMax)return null;var t=this._game.rnd.integerInRange(0,this._obstacleMax-1),e=this._obstacles[t];return--this._obstacleMax,this._obstacles[t]=this._obstacles[this._obstacleMax],this._obstacles[this._obstacleMax]=null,e},e.prototype.destroy=function(t){this._obstacles[this._obstacleMax++]=t},e}();t.ObstaclesPool=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function e(i,n,r){this._game=i,this._bottom=new t.ObstaclesPool(i,e.LIST_BOTTOM,0,n,r),this._top=new t.ObstaclesPool(i,e.LIST_TOP,1,n,r),this._center=new t.ObstaclesPool(i,e.LIST_CENTER,2,n,r),this._bonus=new t.ObstaclesPool(i,e.LIST_BONUS,3,n,r),this._boost=new t.ObstaclesPool(i,e.LIST_BOOST,4,n,r)}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bonus",{get:function(){return this._bonus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boost",{get:function(){return this._boost},enumerable:!0,configurable:!0}),e.LIST_BOTTOM=[{name:"Prekazka0",flip:!1},{name:"Prekazka1",flip:!1},{name:"Prekazka2",flip:!1},{name:"Prekazka3",flip:!1},{name:"Prekazka4",flip:!1},{name:"Prekazka5",flip:!1},{name:"Prekazka1",flip:!1},{name:"Prekazka2",flip:!1},{name:"Prekazka3",flip:!1},{name:"Prekazka4",flip:!1},{name:"Prekazka5",flip:!1}],e.LIST_TOP=[{name:"Prekazka1",flip:!0},{name:"Prekazka2",flip:!0},{name:"Prekazka3",flip:!0},{name:"Prekazka4",flip:!0},{name:"Prekazka5",flip:!0},{name:"Prekazka1",flip:!0},{name:"Prekazka2",flip:!0},{name:"Prekazka3",flip:!0},{name:"Prekazka4",flip:!0},{name:"Prekazka5",flip:!0}],e.LIST_CENTER=[{name:"Letajici0",flip:!1},{name:"Letajici0",flip:!0},{name:"Letajici1",flip:!1},{name:"Letajici1",flip:!0},{name:"Letajici2",flip:!1},{name:"Letajici2",flip:!0}],e.LIST_BONUS=[{name:"Bonus0",flip:!1},{name:"Bonus0",flip:!1},{name:"Bonus1",flip:!1},{name:"Bonus1",flip:!1},{name:"Bonus2",flip:!1},{name:"Bonus2",flip:!1}],e.LIST_BOOST=[{name:"Boost",flip:!1},{name:"Boost",flip:!1}],e}();t.ObstaclesPools=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(t){function e(i,n){t.call(this,i,n),this._sprites=[],this._sprWidth=.25*i.cache.getFrameByName("Sprites","RainbowPtc").width;for(var r=0;r<e.LENGTH;r++){var s=i.add.sprite(-50*r,0,"Sprites","RainbowPtc",this);s.anchor.set(.5,.5),this._sprites[r]=s}}return __extends(e,t),e.prototype.reset=function(){for(var t=0;t<e.LENGTH;t++)this._sprites[t].position.set(-50*t,0)},e.prototype.moveTo=function(t,i,n){var r=2*n+2*(n-1),s=.4*n,a=Math.atan2(this._sprites[0].y-i,this._sprites[0].x-t);this._sprites[0].position.set(t,i),this._sprites[0].rotation=a+Math.PI,this._sprites[0].scale.set(r,r),this._sprites[0].alpha=s;for(var o=1;o<e.LENGTH;o++){var h=this._sprites[o],l=this._sprites[o-1];a=l.position.angle(h.position);var p=this._sprWidth*(1+e.SCALE_INCREASE*o);h.position.set(l.x+Math.cos(a)*p,l.y+Math.sin(a)*p),h.rotation=a+Math.PI;var u=r+o*e.SCALE_INCREASE;h.scale.set(u,u),h.alpha=s-.38*o/e.LENGTH}},e.LENGTH=20,e.SCALE_INCREASE=.2,e}(Phaser.Group);t.Trail=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function t(){this.x=0,this.y=0,this.widthHalf=0,this.circle=!1,this.centerCheck=!1}return t.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.widthHalf=i,this.circle=n,this.centerCheck=!1},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.widthHalf=t.widthHalf,this.circle=t.circle,this.centerCheck=t.centerCheck},t}();t.TunnelParams=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(){function t(){}return t.AUDIO_JSON={resources:["assets\\sfx\\Sfx.ogg","assets\\sfx\\Sfx.m4a"],spritemap:{fuelend:{start:0,end:2.44,loop:!1},crash:{start:4,end:4.96,loop:!1},globe:{start:6,end:7.28,loop:!1},jet:{start:9,end:10.4,loop:!1},rainbow:{start:12,end:13.879999999999999,loop:!1},sweet:{start:15,end:17.12,loop:!1},whinny:{start:19,end:21.84,loop:!1}}},t}();t.Sounds=e}(Ridhwan||(Ridhwan={}));var Spriter;!function(t){var e=function(){function t(){this._items=[],this._itemNames=[]}return t.prototype.add=function(t,e,i){void 0===e&&(e=this._items.length),(void 0===i||null===i)&&(i="item_"+e),this._items[e]=t,this._itemNames[i]=e},t.prototype.getById=function(t){return this._items[t]},t.prototype.getByName=function(t){var e=this._itemNames[t];return"number"==typeof e?this._items[e]:null},Object.defineProperty(t.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),t}();t.IdNameMap=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(){this.reset()}return Object.defineProperty(t.prototype,"current",{get:function(){return this._line.at(this._currentIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this._currentIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._line.at(this._nextIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextIndex",{get:function(){return this._nextIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastTime",{set:function(t){this._lastTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._line},set:function(t){this._line=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this._lastTime=-1,this._currentIndex=-1,this._nextIndex=0},t.prototype.step=function(t){var e=this._nextIndex,i=this._line.keys[e],n=i.time,r=t<this._lastTime;return!r&&n>this._lastTime&&t>=n||r&&(n>this._lastTime||t>=n)?(this._lastTime=n,this._currentIndex=e,++e>=this._line.keys.length&&(e=0),this._nextIndex=e,i):null},t}();t.LineStepper=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function e(){}return e.prototype.load=function(e){this._spriter=new t.Spriter,this._fileType=e.getType();var i=e.getNodes("folder");this.loadFolders(this._spriter,i),i.processed();var n=e.getNodes("tag_list");this.loadTags(this._spriter,n),n.processed();var r=e.getNodes("entity");return this.loadEntities(this._spriter,r),r.processed(),this._spriter},e.prototype.loadFolders=function(t,e){for(var i=0;i<e.length();i++){var n=e.getFolder(i),r=e.getChildNodes(i,"file");this.loadFiles(n,r),r.processed(),t.addFolder(n)}},e.prototype.loadFiles=function(t,e){for(var i=0;i<e.length();i++){var n=e.getFile(i);null!==n&&t.addFile(n)}},e.prototype.loadTags=function(e,i){if(0!==i.length()){var n;n=this._fileType!==t.eFileType.JSON?i.getChildNodes(0,"i"):i;for(var r=0;r<n.length();r++){var s=n.getTag(r);e.addTag(s)}this._fileType!==t.eFileType.JSON&&n.processed()}},e.prototype.loadEntities=function(t,e){for(var i=0;i<e.length();i++){var n=e.getEntity(i),r=e.getChildNodes(i,"obj_info");this.loadObjInfo(n,r),r.processed();var s=e.getChildNodes(i,"character_map");this.loadCharMaps(n,s),s.processed();var a=e.getChildNodes(i,"var_defs");this.loadVariables(n,a),a.processed();var o=e.getChildNodes(i,"animation");this.loadAnimations(n,o),o.processed(),t.addEntity(n)}},e.prototype.loadObjInfo=function(t,e){for(var i=0;i<e.length();i++){var n=e.getObjectInfo(i);t.addObjectInfo(n)}},e.prototype.loadCharMaps=function(t,e){for(var i=0;i<e.length();i++){var n=e.getCharMap(i),r=e.getChildNodes(i,"map");this.loadCharMapEntries(n,r),r.processed(),t.addCharMap(n)}},e.prototype.loadCharMapEntries=function(t,e){for(var i=0;i<e.length();i++)e.getCharMapEntry(i,t,this._spriter)},e.prototype.loadVariables=function(e,i){if(0!==i.length()){var n;n=this._fileType!==t.eFileType.JSON?i.getChildNodes(0,"i"):i;for(var r=0;r<n.length();r++){var s=n.getVariable(r);e.addVariable(s)}this._fileType!==t.eFileType.JSON&&n.processed()}},e.prototype.loadAnimations=function(e,i){for(var n=0;n<i.length();n++){var r=i.getAnimation(n),s=i.getChildNodes(n,"mainline");this.loadMainline(r,s),s.processed();var a=i.getChildNodes(n,"timeline");this.loadTimelines(r,a),a.processed();var o=i.getChildNodes(n,"soundline");this.loadSoundlines(r,o),o.processed();var h=i.getChildNodes(n,"eventline");this.loadEventlines(r,h),h.processed();var l=i.getChildNodes(n,"meta");if(l.length()>0){var p=l.getChildNodes(0,this._fileType!==t.eFileType.JSON?"varline":"valline");this.loadVarlines(e,r,p),p.processed();var u=l.getChildNodes(0,"tagline");this.loadTaglines(r,u),u.processed()}l.processed(),e.addAnimation(r)}},e.prototype.loadMainline=function(e,i){var n=i.getMainline(0);n.type=t.eTimelineType.MAIN_LINE;var r=i.getChildNodes(0,"key");this.loadMainlineKeys(n,r),r.processed(),e.mainline=n},e.prototype.loadMainlineKeys=function(t,e){for(var i=0;i<e.length();i++){for(var n=e.getMainlineKey(i),r=e.getChildNodes(i,"bone_ref"),s=0;s<r.length();s++)n.addBoneRef(r.getRef(s));r.processed();for(var a=e.getChildNodes(i,"object_ref"),o=0;o<a.length();o++)n.addObjectRef(a.getRef(o));a.processed(),t.add(n)}},e.prototype.loadTimelines=function(t,e){for(var i=0;i<e.length();i++){var n=e.getTimeline(i),r=e.getChildNodes(i,"key");this.loadTimelineKeys(n,r),r.processed(),t.addTimeline(n)}},e.prototype.loadTimelineKeys=function(t,e){for(var i=0;i<e.length();i++){var n=e.getTimelineKey(i,this._spriter);t.add(n)}},e.prototype.loadSoundlines=function(e,i){for(var n=0;n<i.length();n++){var r=i.getSoundline(n);r.type=t.eTimelineType.SOUND_LINE;var s=i.getChildNodes(n,"key");this.loadKeys(r,s),s.processed(),e.addLine(r)}},e.prototype.loadKeys=function(t,e){for(var i=0;i<e.length();i++){var n=e.getKey(i);t.add(n)}},e.prototype.loadEventlines=function(e,i){for(var n=0;n<i.length();n++){var r=i.getEventline(n);r.type=t.eTimelineType.EVENT_LINE;var s=i.getChildNodes(n,"key");this.loadKeys(r,s),s.processed(),e.addLine(r)}},e.prototype.loadTaglines=function(e,i){for(var n=0;n<i.length();n++){var r=i.getTagline(n);r.type=t.eTimelineType.TAG_LINE;var s=i.getChildNodes(n,"key");this.loadTagKeys(r,s),s.processed(),e.addLine(r)}},e.prototype.loadTagKeys=function(t,e){for(var i=0;i<e.length();i++){var n=e.getTagKey(i),r=e.getChildNodes(i,"tag"),s=r.getTagChanges(this._spriter);r.processed(),n.tagsOn=s,t.add(n)}},e.prototype.loadVarlines=function(t,e,i){for(var n=0;n<i.length();n++){var r=i.getVarline(n),s=t.getVariableById(r.varDefId).type,a=i.getChildNodes(n,"key");this.loadVariableKeys(r,a,s),a.processed(),e.addLine(r)}},e.prototype.loadVariableKeys=function(t,e,i){for(var n=0;n<e.length();n++){var r=e.getVariableKey(n,i);t.add(r)}},e}();t.Loader=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e){this._file=t,this._nodeList=e}return t.prototype.length=function(){return this._nodeList.length},t.prototype.processed=function(){this._file.processed()},t.prototype.getChildNodes=function(t,e){return this._file.getNodesForElement(this._nodeList[t],e)},t.prototype.getFolder=function(t){return this._file.getFolder(this._nodeList[t])},t.prototype.getFile=function(t){return this._file.getFile(this._nodeList[t])},t.prototype.getTag=function(t){return this._file.getTag(this._nodeList[t])},t.prototype.getEntity=function(t){return this._file.getEntity(this._nodeList[t])},t.prototype.getObjectInfo=function(t){return this._file.getObjectInfo(this._nodeList[t],t)},t.prototype.getCharMap=function(t){return this._file.getCharMap(this._nodeList[t])},t.prototype.getCharMapEntry=function(t,e,i){this._file.getCharMapEntry(this._nodeList[t],e,i)},t.prototype.getVariable=function(t){return this._file.getVariable(this._nodeList[t])},t.prototype.getAnimation=function(t){return this._file.getAnimation(this._nodeList[t])},t.prototype.getMainline=function(t){return this._file.getBaseline(this._nodeList[t])},t.prototype.getMainlineKey=function(t){return this._file.getMainlineKey(this._nodeList[t])},t.prototype.getRef=function(t){return this._file.getRef(this._nodeList[t])},t.prototype.getTimeline=function(t){return this._file.getTimeline(this._nodeList[t])},t.prototype.getSoundline=function(t){return this._file.getBaseline(this._nodeList[t])},t.prototype.getEventline=function(t){return this._file.getBaseline(this._nodeList[t])},t.prototype.getTagline=function(t){return this._file.getBaseline(this._nodeList[t])},t.prototype.getVarline=function(t){return this._file.getVarline(this._nodeList[t])},t.prototype.getKey=function(t){return this._file.getKey(this._nodeList[t])},t.prototype.getTagKey=function(t){return this._file.getTagKey(this._nodeList[t])},t.prototype.getVariableKey=function(t,e){return this._file.getVariableKey(this._nodeList[t],e)},t.prototype.getTimelineKey=function(t,e){return this._file.getTimelineKey(this._nodeList[t],t,e)},t.prototype.getTagChanges=function(t){for(var e=0,i=0;i<this.length();i++){var n=this._file.getTagChange(this._nodeList[i]);e|=1<<n}return e},t}();t.NodeListBin=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e){this._file=t,this._nodeList=e,Array.isArray(e)||(e.length=1)}return t.prototype.length=function(){return this._nodeList.length},t.prototype.processed=function(){this._file.processed()},t.prototype.getNode=function(t){return Array.isArray(this._nodeList)?this._nodeList[t]:this._nodeList},t.prototype.getChildNodes=function(t,e){return this._file.getNodesForElement(this.getNode(t),e)},t.prototype.getFolder=function(t){return this._file.getFolder(this.getNode(t))},t.prototype.getFile=function(t){return this._file.getFile(this.getNode(t))},t.prototype.getTag=function(t){return this._file.getTag(this.getNode(t))},t.prototype.getEntity=function(t){return this._file.getEntity(this.getNode(t))},t.prototype.getObjectInfo=function(t){return this._file.getObjectInfo(this.getNode(t),t)},t.prototype.getCharMap=function(t){return this._file.getCharMap(this.getNode(t))},t.prototype.getCharMapEntry=function(t,e,i){this._file.getCharMapEntry(this.getNode(t),e,i)},t.prototype.getVariable=function(t){return this._file.getVariable(this.getNode(t))},t.prototype.getAnimation=function(t){return this._file.getAnimation(this.getNode(t))},t.prototype.getMainline=function(t){return this._file.getBaseline(this.getNode(t))},t.prototype.getMainlineKey=function(t){return this._file.getMainlineKey(this.getNode(t))},t.prototype.getRef=function(t){return this._file.getRef(this.getNode(t))},t.prototype.getTimeline=function(t){return this._file.getTimeline(this.getNode(t))},t.prototype.getSoundline=function(t){return this._file.getBaseline(this.getNode(t))},t.prototype.getEventline=function(t){return this._file.getBaseline(this.getNode(t))},t.prototype.getTagline=function(t){return this._file.getBaseline(this.getNode(t))},t.prototype.getVarline=function(t){return this._file.getVarline(this.getNode(t))},t.prototype.getKey=function(t){return this._file.getKey(this.getNode(t))},t.prototype.getTagKey=function(t){return this._file.getTagKey(this.getNode(t))},t.prototype.getVariableKey=function(t,e){return this._file.getVariableKey(this.getNode(t),e)},t.prototype.getTimelineKey=function(t,e){return this._file.getTimelineKey(this.getNode(t),t,e)},t.prototype.getTagChanges=function(t){for(var e=0,i=0;i<this.length();i++){var n=this._file.getTagChange(this.getNode(i));e|=1<<n}return e},t}();t.NodeListJSON=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e){this._file=t,this._nodeList=e}return t.prototype.length=function(){return this._nodeList.length},t.prototype.processed=function(){this._file.processed()},t.prototype.getChildNodes=function(t,e){return this._file.getNodesForElement(this._nodeList.item(t),e)},t.prototype.getFolder=function(t){return this._file.getFolder(this._nodeList.item(t))},t.prototype.getFile=function(t){return this._file.getFile(this._nodeList.item(t))},t.prototype.getTag=function(t){return this._file.getTag(this._nodeList.item(t))},t.prototype.getEntity=function(t){return this._file.getEntity(this._nodeList.item(t))},t.prototype.getObjectInfo=function(t){return this._file.getObjectInfo(this._nodeList.item(t),t)},t.prototype.getCharMap=function(t){return this._file.getCharMap(this._nodeList.item(t))},t.prototype.getCharMapEntry=function(t,e,i){this._file.getCharMapEntry(this._nodeList.item(t),e,i)},t.prototype.getVariable=function(t){return this._file.getVariable(this._nodeList.item(t))},t.prototype.getAnimation=function(t){return this._file.getAnimation(this._nodeList.item(t))},t.prototype.getMainline=function(t){return this._file.getBaseline(this._nodeList.item(t))},t.prototype.getMainlineKey=function(t){return this._file.getMainlineKey(this._nodeList.item(t))},t.prototype.getRef=function(t){return this._file.getRef(this._nodeList.item(t))},t.prototype.getTimeline=function(t){return this._file.getTimeline(this._nodeList.item(t))},t.prototype.getSoundline=function(t){return this._file.getBaseline(this._nodeList.item(t))},t.prototype.getEventline=function(t){return this._file.getBaseline(this._nodeList.item(t))},t.prototype.getTagline=function(t){return this._file.getBaseline(this._nodeList.item(t))},t.prototype.getVarline=function(t){return this._file.getVarline(this._nodeList.item(t))},t.prototype.getKey=function(t){return this._file.getKey(this._nodeList.item(t))},t.prototype.getTagKey=function(t){return this._file.getTagKey(this._nodeList.item(t))},t.prototype.getVariableKey=function(t,e){return this._file.getVariableKey(this._nodeList.item(t),e)},t.prototype.getTimelineKey=function(t,e){return this._file.getTimelineKey(this._nodeList.item(t),t,e)},t.prototype.getTagChanges=function(t){for(var e=0,i=0;i<this.length();i++){var n=this._file.getTagChange(this._nodeList.item(i));e|=1<<n}return e},t}();t.NodeListXml=e}(Spriter||(Spriter={}));var Spriter;!function(t){!function(t){t[t.XML=0]="XML",t[t.JSON=1]="JSON",t[t.BIN=2]="BIN"}(t.eFileType||(t.eFileType={}));var e=(t.eFileType,function(){function t(){}return t.prototype.processed=function(){this.popMinDefsStack()},t.prototype.setMinimized=function(t,e){void 0===e&&(e=null),this._minimized=t,this._minDefs=e,t&&(this._minDefsStack=[],null===e)},t.prototype.getFileNameWithoutExtension=function(t){var e=t.split("\\").pop().split("/").pop().split(".")[0];return e},t.prototype.translateElementName=function(t){if(this._minimized){if(this._minDefs.name!==t)return t;null!==this._minDefs.minName&&(t=this._minDefs.minName)}return t},t.prototype.translateChildElementName=function(t){if(this._minimized&&null!==this._minDefs){var e=this._minDefs.childElements;null!==e&&(t=null===e[t]?t:e[t].minName)}return t},t.prototype.translateAttributeName=function(t){if(this._minimized&&null!==this._minDefs){var e=this._minDefs.attributes;null!==e&&(t=null===e[t]?t:e[t])}return t},t.prototype.setMinDefsToElementName=function(t){if(this._minimized){this._minDefsStack.push(this._minDefs);var e=this._minDefs.childElements[t];this._minDefs=e}},t.prototype.popMinDefsStack=function(){this._minimized&&(this._minDefs=this._minDefsStack.pop())},t}());t.SpriterFile=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(t){e.call(this),this._elements={spriter_data:1,folder:2,file:3,entity:4,obj_info:5,frames:6,i:7,animation:8,mainline:9,key:10,bone_ref:11,object_ref:12,timeline:13,bone:14,object:15},this._smallOffset=!1,this._bin=new DataView(t),this._smallOffset=1===this._bin.getUint8(0)}return __extends(i,e),i.prototype.getType=function(){return t.eFileType.BIN},i.prototype.readUint8=function(){return this._bin.getUint8(this._tmpPosition++)},i.prototype.readInt8=function(){
return this._bin.getInt8(this._tmpPosition++)},i.prototype.readUint16=function(){var t=this._bin.getUint16(this._tmpPosition,!0);return this._tmpPosition+=2,t},i.prototype.readInt16=function(){var t=this._bin.getInt16(this._tmpPosition,!0);return this._tmpPosition+=2,t},i.prototype.readUint32=function(){var t=this._bin.getUint32(this._tmpPosition,!0);return this._tmpPosition+=4,t},i.prototype.readInt32=function(){var t=this._bin.getInt32(this._tmpPosition,!0);return this._tmpPosition+=4,t},i.prototype.readFixed16_16=function(){var t=this._bin.getInt32(this._tmpPosition,!0);return this._tmpPosition+=4,t/65536},i.prototype.readFixed1_7=function(){var t=255&this._bin.getInt8(this._tmpPosition++);return t/128},i.prototype.readString=function(){for(var t=[],e=this._bin.getUint8(this._tmpPosition++)-1;e>=0;e--)t.push(this._bin.getUint8(this._tmpPosition++));return String.fromCharCode.apply(null,t)},i.prototype.getNodes=function(e){return new t.NodeListBin(this,this.getSubNodesOfElementType(1,this._elements[e]))},i.prototype.getNodesForElement=function(e,i){return new t.NodeListBin(this,this.getSubNodesOfElementType(e,this._elements[i]))},i.prototype.getSubNodesOfElementType=function(t,e){var i=[],n=this._bin.getUint8(t+1);t+=2;for(var r=0;n>r;r++){var s=this._smallOffset?this._bin.getUint16(t+2*r,!0):this._bin.getUint32(t+4*r,!0),a=this._bin.getUint8(t+s);a===e&&i.push(t+s)}return i},i.prototype.getAttribsPosition=function(t){var e=this._bin.getUint8(t+1);return t+2+e*(this._smallOffset?2:4)},i.prototype.getFolder=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r="",s=this._bin.getUint8(this._tmpPosition++)-1;s>=0;s--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_FOLDER_ID:n=this.readUint8();break;case i.ATTR_FOLDER_NAME:r=this.readString()}return new t.Folder(n,r)},i.prototype.getFile=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r="",s=0,a=0,o=this._bin.getUint8(this._tmpPosition++)-1;o>=0;o--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_FILE_ID:n=this.readUint8();break;case i.ATTR_FILE_NAME:r=this.readString();break;case i.ATTR_FILE_PIVOT_X:s=this.readFixed16_16();break;case i.ATTR_FILE_PIVOT_Y:a=this.readFixed16_16();break;case i.ATTR_FILE_WIDTH:case i.ATTR_FILE_HEIGHT:this._tmpPosition+=2}return new t.File(n,this.getFileNameWithoutExtension(r),s,1-a)},i.prototype.getTag=function(t){return null},i.prototype.getEntity=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r="",s=this._bin.getUint8(this._tmpPosition++)-1;s>=0;s--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_ENTITY_ID:n=this.readUint8();break;case i.ATTR_ENTITY_NAME:r=this.readString()}return new t.Entity(n,r)},i.prototype.getObjectInfo=function(e,n){this._tmpPosition=this.getAttribsPosition(e);for(var r="",s=0,a=0,o=0,h=this._bin.getUint8(this._tmpPosition++)-1;h>=0;h--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_OBJ_INFO_NAME:r=this.readString();break;case i.ATTR_OBJ_INFO_TYPE:1===this.readUint8()&&(s=1);break;case i.ATTR_OBJ_INFO_WIDTH:a=this.readFixed16_16();break;case i.ATTR_OBJ_INFO_HEIGHT:o=this.readFixed16_16()}return new t.ObjectInfo(n,r,s,a,o,0,0)},i.prototype.getCharMap=function(t){return null},i.prototype.getCharMapEntry=function(t,e,i){return null},i.prototype.getVariable=function(t){return null},i.prototype.getAnimation=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r="",s=0,a=t.eAnimationLooping.LOOPING,o=this._bin.getUint8(this._tmpPosition++)-1;o>=0;o--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_ANIMATION_ID:n=this.readUint8();break;case i.ATTR_ANIMATION_NAME:r=this.readString();break;case i.ATTR_ANIMATION_LENGTH:s=this.readUint32();break;case i.ATTR_ANIMATION_INTERVAL:this._tmpPosition+=2;break;case i.ATTR_ANIMATION_LOOPING:a=1===this.readUint8()?t.eAnimationLooping.LOOPING:t.eAnimationLooping.NO_LOOPING}return new t.Animation(n,r,s,a)},i.prototype.getMainlineKey=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r=0,s=this._bin.getUint8(this._tmpPosition++)-1;s>=0;s--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_MAINLINE_KEY_ID:n=this.readUint8();break;case i.ATTR_MAINLINE_KEY_TIME:r=this.readUint32()}return new t.KeyMainline(n,r)},i.prototype.getRef=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r=-1,s=0,a=0,o=0,h=this._bin.getUint8(this._tmpPosition++)-1;h>=0;h--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_BONE_REF_ID:case i.ATTR_OBJ_REF_ID:n=this.readUint8();break;case i.ATTR_BONE_REF_PARENT:case i.ATTR_OBJ_REF_PARENT:r=this.readUint8();break;case i.ATTR_BONE_REF_TIMELINE:case i.ATTR_OBJ_REF_TIMELINE:s=this.readUint8();break;case i.ATTR_BONE_REF_KEY:case i.ATTR_OBJ_REF_KEY:a=this.readUint8();break;case i.ATTR_OBJ_REF_Z:o=this.readUint8();break;case i.ATTR_OBJ_REF_NAME:this.readString();break;case i.ATTR_OBJ_REF_FOLDER:case i.ATTR_OBJ_REF_FILE:++this._tmpPosition;break;case i.ATTR_OBJ_REF_ABS_X:case i.ATTR_OBJ_REF_ABS_Y:case i.ATTR_OBJ_REF_ABS_PIVOT_X:case i.ATTR_OBJ_REF_ABS_PIVOT_Y:case i.ATTR_OBJ_REF_ABS_SCALE_X:case i.ATTR_OBJ_REF_ABS_SCALE_Y:case i.ATTR_OBJ_REF_ANGLE:this._tmpPosition+=4;break;case i.ATTR_OBJ_REF_ALPHA:++this._tmpPosition}return new t.Ref(n,r,s,a,o)},i.prototype.getTimeline=function(e){this._tmpPosition=this.getAttribsPosition(e);for(var n=0,r="",s=0,a=0,o=this._bin.getUint8(this._tmpPosition++)-1;o>=0;o--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_TIMELINE_ID:n=this.readUint8();break;case i.ATTR_TIMELINE_NAME:r=this.readString();break;case i.ATTR_TIMELINE_OBJ:s=this.readUint8();break;case i.ATTR_TIMELINE_OBJ_TYPE:1===this.readUint8()&&(a=1)}return new t.Timeline(n,r,a,s)},i.prototype.getBaseline=function(t){return null},i.prototype.getVarline=function(t){return null},i.prototype.getKey=function(t){return null},i.prototype.getTagKey=function(t){return null},i.prototype.getVariableKey=function(t,e){return null},i.prototype.getTimelineKey=function(e,n,r){this._tmpPosition=this.getAttribsPosition(e);for(var s=0,a=1,o=0,h=0,l=0,p=0,u=0,c=this._bin.getUint8(this._tmpPosition++)-1;c>=0;c--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_TIMELINE_KEY_ID:++this._tmpPosition;break;case i.ATTR_TIMELINE_KEY_TIME:s=this.readUint32();break;case i.ATTR_TIMELINE_KEY_SPIN:a=this.readInt8();break;case i.ATTR_TIMELINE_KEY_CURVE:o=this.readUint8();break;case i.ATTR_TIMELINE_KEY_C1:h=this.readFixed1_7();break;case i.ATTR_TIMELINE_KEY_C2:l=this.readFixed1_7()}e+=2;var _=e+(this._smallOffset?this._bin.getUint16(e,!0):this._bin.getUint32(e,!0)),d=this._bin.getUint8(_),f=null,m=!1;14===d?f=new t.KeyBone(n,s,a):15===d&&(f=new t.KeyObject(n,s,a),m=!0),0!==o&&f.setCurve(o,h,l,p,u),this._tmpPosition=this.getAttribsPosition(_);var g=f.info;g.x=0,g.y=0,g.scaleX=1,g.scaleY=1,g.angle=0,g.alpha=1;for(var y=0,T=!1,v=0,b=!1,E=0,S=0,c=this._bin.getUint8(this._tmpPosition++)-1;c>=0;c--)switch(this._bin.getUint8(this._tmpPosition++)){case i.ATTR_BONE_X:case i.ATTR_OBJ_X:g.x=this.readFixed16_16();break;case i.ATTR_BONE_Y:case i.ATTR_OBJ_Y:g.y=-this.readFixed16_16();break;case i.ATTR_BONE_ANGLE:case i.ATTR_OBJ_ANGLE:g.angle=360-this.readFixed16_16();break;case i.ATTR_BONE_SCALE_X:case i.ATTR_OBJ_SCALE_X:g.scaleX=this.readFixed16_16();break;case i.ATTR_BONE_SCALE_Y:case i.ATTR_OBJ_SCALE_Y:g.scaleY=this.readFixed16_16();break;case i.ATTR_OBJ_FOLDER:E=this.readUint8();break;case i.ATTR_OBJ_FILE:S=this.readUint8();break;case i.ATTR_OBJ_PIVOT_X:y=this.readFixed16_16(),T=!0;break;case i.ATTR_OBJ_PIVOT_Y:v=this.readFixed16_16(),b=!0;break;case i.ATTR_OBJ_ALPHA:g.alpha=this.readFixed1_7()}if(m){f.setFolderAndFile(E,S);var A=r.getFolderById(E).getFileById(S);g.pivotX=T?y:A.pivotX,g.pivotY=1-(b?v:1-A.pivotY)}return f},i.prototype.getTagChange=function(t){return null},i.ATTR_VERSION=0,i.ATTR_GENERATOR=1,i.ATTR_GENERATOR_VERSION=2,i.ATTR_FOLDER_ID=0,i.ATTR_FOLDER_NAME=1,i.ATTR_FILE_ID=0,i.ATTR_FILE_NAME=1,i.ATTR_FILE_WIDTH=2,i.ATTR_FILE_HEIGHT=3,i.ATTR_FILE_PIVOT_X=4,i.ATTR_FILE_PIVOT_Y=5,i.ATTR_ENTITY_ID=0,i.ATTR_ENTITY_NAME=1,i.ATTR_OBJ_INFO_NAME=0,i.ATTR_OBJ_INFO_TYPE=1,i.ATTR_OBJ_INFO_WIDTH=2,i.ATTR_OBJ_INFO_HEIGHT=3,i.ATTR_FRAMES_I_FOLDER=0,i.ATTR_FRAMES_I_FILE=1,i.ATTR_ANIMATION_ID=0,i.ATTR_ANIMATION_NAME=1,i.ATTR_ANIMATION_LENGTH=2,i.ATTR_ANIMATION_INTERVAL=3,i.ATTR_ANIMATION_LOOPING=4,i.ATTR_MAINLINE_KEY_ID=0,i.ATTR_MAINLINE_KEY_TIME=1,i.ATTR_BONE_REF_ID=0,i.ATTR_BONE_REF_PARENT=1,i.ATTR_BONE_REF_TIMELINE=2,i.ATTR_BONE_REF_KEY=3,i.ATTR_OBJ_REF_ID=4,i.ATTR_OBJ_REF_PARENT=5,i.ATTR_OBJ_REF_TIMELINE=6,i.ATTR_OBJ_REF_KEY=7,i.ATTR_OBJ_REF_NAME=8,i.ATTR_OBJ_REF_Z=9,i.ATTR_OBJ_REF_FOLDER=10,i.ATTR_OBJ_REF_FILE=11,i.ATTR_OBJ_REF_ABS_X=12,i.ATTR_OBJ_REF_ABS_Y=13,i.ATTR_OBJ_REF_ABS_PIVOT_X=14,i.ATTR_OBJ_REF_ABS_PIVOT_Y=15,i.ATTR_OBJ_REF_ABS_SCALE_X=16,i.ATTR_OBJ_REF_ABS_SCALE_Y=17,i.ATTR_OBJ_REF_ANGLE=18,i.ATTR_OBJ_REF_ALPHA=19,i.ATTR_TIMELINE_ID=0,i.ATTR_TIMELINE_NAME=1,i.ATTR_TIMELINE_OBJ=2,i.ATTR_TIMELINE_OBJ_TYPE=3,i.ATTR_TIMELINE_KEY_ID=0,i.ATTR_TIMELINE_KEY_TIME=1,i.ATTR_TIMELINE_KEY_SPIN=2,i.ATTR_TIMELINE_KEY_CURVE=3,i.ATTR_TIMELINE_KEY_C1=4,i.ATTR_TIMELINE_KEY_C2=5,i.ATTR_BONE_X=0,i.ATTR_BONE_Y=1,i.ATTR_BONE_ANGLE=2,i.ATTR_BONE_SCALE_X=3,i.ATTR_BONE_SCALE_Y=4,i.ATTR_OBJ_FOLDER=5,i.ATTR_OBJ_FILE=6,i.ATTR_OBJ_X=7,i.ATTR_OBJ_Y=8,i.ATTR_OBJ_SCALE_X=9,i.ATTR_OBJ_SCALE_Y=10,i.ATTR_OBJ_PIVOT_X=11,i.ATTR_OBJ_PIVOT_Y=12,i.ATTR_OBJ_ANGLE=13,i.ATTR_OBJ_ALPHA=14,i}(t.SpriterFile);t.SpriterBin=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=null),e.call(this),this._json=t;var n=void 0!==t.min;this.setMinimized(n,i)}return __extends(i,e),i.prototype.getType=function(){return t.eFileType.JSON},i.prototype.parseInt=function(t,e,i){void 0===i&&(i=0);var n=t[this.translateAttributeName(e)];return void 0===n?i:"number"==typeof n?n:parseInt(n)},i.prototype.parseFloat=function(t,e,i){void 0===i&&(i=0);var n=t[this.translateAttributeName(e)];return void 0===n?i:"number"==typeof n?n:parseFloat(n)},i.prototype.parseBoolean=function(t,e,i){void 0===i&&(i=!1);var n=t[this.translateAttributeName(e)];return void 0===n?i:"boolean"==typeof n?n:"true"===n},i.prototype.parseString=function(t,e,i){void 0===i&&(i="");var n=t[this.translateAttributeName(e)];return void 0===n?i:n},i.prototype.getNodes=function(e){this.setMinDefsToElementName(e);var i=this.translateElementName(e);return new t.NodeListJSON(this,void 0!==this._json[i]?this._json[i]:[])},i.prototype.getNodesForElement=function(e,i){this.setMinDefsToElementName(i);var n=this.translateElementName(i);return new t.NodeListJSON(this,void 0!==e[n]?e[n]:[])},i.prototype.getFolder=function(e){return new t.Folder(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getFile=function(e){return void 0!==e.type&&"sound"===e.type?null:new t.File(this.parseInt(e,"id"),this.getFileNameWithoutExtension(this.parseString(e,"name")),this.parseFloat(e,"pivot_x"),1-this.parseFloat(e,"pivot_y"))},i.prototype.getTag=function(e){return new t.Item(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getEntity=function(e){return new t.Entity(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getObjectInfo=function(e,i){return new t.ObjectInfo(i,this.parseString(e,"name"),t.Types.getObjectTypeForName(this.parseString(e,"type")),this.parseFloat(e,"w"),this.parseFloat(e,"h"),this.parseFloat(e,"pivot_x"),this.parseFloat(e,"pivot_y"))},i.prototype.getCharMap=function(e){return new t.CharMap(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getCharMapEntry=function(t,e,i){var n=i.getFolderById(this.parseInt(t,"folder")).getFileById(this.parseInt(t,"file")).name,r=null;void 0!==t.target_folder&&void 0!==t.target_file&&(r=i.getFolderById(this.parseInt(t,"target_folder")).getFileById(this.parseInt(t,"target_file"))),e.put(n,r)},i.prototype.getVariable=function(e){var i=t.Types.getVariableTypeForName(this.parseString(e,"type"));return new t.Variable(this.parseInt(e,"id"),this.parseString(e,"name"),i,2===i?this.parseString(e,"default"):this.parseFloat(e,"default",0))},i.prototype.getAnimation=function(e){return new t.Animation(this.parseInt(e,"id"),this.parseString(e,"name"),this.parseFloat(e,"length"),this.parseBoolean(e,"looping",!0)===!0?t.eAnimationLooping.LOOPING:t.eAnimationLooping.NO_LOOPING)},i.prototype.getMainlineKey=function(e){return new t.KeyMainline(this.parseInt(e,"id"),this.parseFloat(e,"time"))},i.prototype.getRef=function(e){return new t.Ref(this.parseInt(e,"id"),this.parseInt(e,"parent",-1),this.parseInt(e,"timeline"),this.parseInt(e,"key"),this.parseInt(e,"z_index"))},i.prototype.getTimeline=function(e){return new t.Timeline(this.parseInt(e,"id"),this.parseString(e,"name"),t.Types.getObjectTypeForName(this.parseString(e,"object_type","sprite")),this.parseInt(e,"obj",-1))},i.prototype.getBaseline=function(e){return new t.Baseline(this.parseInt(e,"id"),this.parseString(e,"name",null))},i.prototype.getVarline=function(e){return new t.Varline(this.parseInt(e,"id"),this.parseInt(e,"def"))},i.prototype.getKey=function(e){return new t.Key(this.parseInt(e,"id"),this.parseInt(e,"time"))},i.prototype.getTagKey=function(e){return new t.KeyTag(this.parseInt(e,"id"),this.parseInt(e,"time"))},i.prototype.getVariableKey=function(e,i){return new t.KeyVariable(this.parseInt(e,"id"),this.parseInt(e,"time"),2===i?this.parseString(e,"val"):this.parseFloat(e,"val"))},i.prototype.getTimelineKey=function(e,i,n){var r=this.parseInt(e,"time"),s=this.parseInt(e,"spin",1),a=this.parseString(e,"curve_type","linear"),o=this.parseFloat(e,"c1",0),h=this.parseFloat(e,"c2",0),l=this.parseFloat(e,"c3",0),p=this.parseFloat(e,"c4",0),u=this.translateChildElementName("bone"),c=this.translateChildElementName("object"),_=null,d=null,f=!1;void 0!==e[u]?(d=e[u],_=new t.KeyBone(i,r,s),this.setMinDefsToElementName("bone")):void 0!==e[c]&&(d=e[c],_=new t.KeyObject(i,r,s),this.setMinDefsToElementName("object"),f=!0),"linear"!==a&&_.setCurve(t.Types.getCurveTypeForName(a),o,h,l,p);var m=_.info;if(m.x=this.parseFloat(d,"x"),m.y=-this.parseFloat(d,"y"),m.scaleX=this.parseFloat(d,"scale_x",1),m.scaleY=this.parseFloat(d,"scale_y",1),m.angle=360-this.parseFloat(d,"angle"),m.alpha=this.parseFloat(d,"a",1),f){var g=this.parseInt(d,"folder"),y=this.parseInt(d,"file");_.setFolderAndFile(g,y);var T=n.getFolderById(g).getFileById(y);m.pivotX=this.parseFloat(d,"pivot_x",T.pivotX),m.pivotY=1-this.parseFloat(d,"pivot_y",1-T.pivotY)}return this.popMinDefsStack(),_},i.prototype.getTagChange=function(t){return this.parseInt(t,"t")},i}(t.SpriterFile);t.SpriterJSON=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=null),e.call(this),this._xml=t;var n=t.documentElement.hasAttribute("min");this.setMinimized(n,i)}return __extends(i,e),i.prototype.getType=function(){return t.eFileType.XML},i.prototype.parseInt=function(t,e,i){void 0===i&&(i=0);var n=t.getAttribute(this.translateAttributeName(e));return null!==n?parseInt(n):i},i.prototype.parseFloat=function(t,e,i){void 0===i&&(i=0);var n=t.getAttribute(this.translateAttributeName(e));return null!==n?parseFloat(n):i},i.prototype.parseString=function(t,e,i){void 0===i&&(i="");var n=t.getAttribute(this.translateAttributeName(e));return null!==n?n:i},i.prototype.getNodes=function(e){this.setMinDefsToElementName(e);var i=this.translateElementName(e);return new t.NodeListXml(this,this._xml.documentElement.getElementsByTagName(i))},i.prototype.getNodesForElement=function(e,i){this.setMinDefsToElementName(i);var n=this.translateElementName(i);return new t.NodeListXml(this,e.getElementsByTagName(n))},i.prototype.getFolder=function(e){return new t.Folder(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getFile=function(e){return e.hasAttribute("type")&&"sound"===e.getAttribute("type")?null:new t.File(this.parseInt(e,"id"),this.getFileNameWithoutExtension(this.parseString(e,"name")),this.parseFloat(e,"pivot_x"),1-this.parseFloat(e,"pivot_y"))},i.prototype.getTag=function(e){return new t.Item(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getEntity=function(e){return new t.Entity(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getObjectInfo=function(e,i){return new t.ObjectInfo(i,this.parseString(e,"name"),t.Types.getObjectTypeForName(this.parseString(e,"type")),this.parseFloat(e,"w"),this.parseFloat(e,"h"),this.parseFloat(e,"pivot_x"),this.parseFloat(e,"pivot_y"))},i.prototype.getCharMap=function(e){return new t.CharMap(this.parseInt(e,"id"),this.parseString(e,"name"))},i.prototype.getCharMapEntry=function(t,e,i){var n=i.getFolderById(this.parseInt(t,"folder")).getFileById(this.parseInt(t,"file")).name,r=null;t.hasAttribute("target_folder")&&t.hasAttribute("target_file")&&(r=i.getFolderById(this.parseInt(t,"target_folder")).getFileById(this.parseInt(t,"target_file"))),e.put(n,r)},i.prototype.getVariable=function(e){var i=t.Types.getVariableTypeForName(this.parseString(e,"type"));return new t.Variable(this.parseInt(e,"id"),this.parseString(e,"name"),i,2===i?this.parseString(e,"default"):this.parseFloat(e,"default",0))},i.prototype.getAnimation=function(e){return new t.Animation(this.parseInt(e,"id"),this.parseString(e,"name"),this.parseFloat(e,"length"),"true"===this.parseString(e,"looping","true")?t.eAnimationLooping.LOOPING:t.eAnimationLooping.NO_LOOPING)},i.prototype.getMainlineKey=function(e){return new t.KeyMainline(this.parseInt(e,"id"),this.parseFloat(e,"time"))},i.prototype.getRef=function(e){return new t.Ref(this.parseInt(e,"id"),this.parseInt(e,"parent",-1),this.parseInt(e,"timeline"),this.parseInt(e,"key"),this.parseInt(e,"z_index"))},i.prototype.getTimeline=function(e){return new t.Timeline(this.parseInt(e,"id"),this.parseString(e,"name"),t.Types.getObjectTypeForName(this.parseString(e,"object_type","sprite")),this.parseInt(e,"obj",-1))},i.prototype.getBaseline=function(e){return new t.Baseline(this.parseInt(e,"id"),this.parseString(e,"name",null))},i.prototype.getVarline=function(e){return new t.Varline(this.parseInt(e,"id"),this.parseInt(e,"def"))},i.prototype.getKey=function(e){return new t.Key(this.parseInt(e,"id"),this.parseInt(e,"time"))},i.prototype.getTagKey=function(e){return new t.KeyTag(this.parseInt(e,"id"),this.parseInt(e,"time"))},i.prototype.getVariableKey=function(e,i){return new t.KeyVariable(this.parseInt(e,"id"),this.parseInt(e,"time"),2===i?this.parseString(e,"val"):this.parseFloat(e,"val"))},i.prototype.getTimelineKey=function(e,i,n){var r=this.parseInt(e,"time"),s=this.parseInt(e,"spin",1),a=this.parseString(e,"curve_type","linear"),o=this.parseFloat(e,"c1",0),h=this.parseFloat(e,"c2",0),l=this.parseFloat(e,"c3",0),p=this.parseFloat(e,"c4",0),u=this.translateChildElementName("bone"),c=this.translateChildElementName("object"),_=null,d=e.firstElementChild,f=!1;d.tagName===u?(_=new t.KeyBone(i,r,s),this.setMinDefsToElementName("bone")):d.tagName===c&&(this.setMinDefsToElementName("object"),_=new t.KeyObject(i,r,s),f=!0),"linear"!==a&&_.setCurve(t.Types.getCurveTypeForName(a),o,h,l,p);var m=_.info;if(m.x=this.parseFloat(d,"x"),m.y=-this.parseFloat(d,"y"),m.scaleX=this.parseFloat(d,"scale_x",1),m.scaleY=this.parseFloat(d,"scale_y",1),m.angle=360-this.parseFloat(d,"angle"),m.alpha=this.parseFloat(d,"a",1),f){var g=this.parseInt(d,"folder"),y=this.parseInt(d,"file");_.setFolderAndFile(g,y);var T=n.getFolderById(g).getFileById(y);m.pivotX=this.parseFloat(d,"pivot_x",T.pivotX),m.pivotY=1-this.parseFloat(d,"pivot_y",1-T.pivotY)}return this.popMinDefsStack(),_},i.prototype.getTagChange=function(t){return this.parseInt(t,"t")},i}(t.SpriterFile);t.SpriterXml=e}(Spriter||(Spriter={}));var Spriter;!function(t){function e(t,e,i){return(e-t)*i+t}function i(t,i,n,r){return e(e(t,i,r),e(i,n,r),r)}function n(t,n,r,s,a){return e(i(t,n,r,a),i(n,r,s,a),a)}function r(t,i,r,s,a,o){return e(n(t,i,r,s,o),n(i,r,s,a,o),o)}function s(t,i,n,s,a,o,h){return e(r(t,i,n,s,a,h),r(i,n,s,a,o,h),h)}function a(t,e,i){var n=1,r=1-i,s=i*i,a=r*r,o=s*i;return 0+3*a*i*t+3*r*s*e+o*n}function o(t,e,i,n,r){for(var s=.001,o=10,h=0,l=1,p=(l+h)/2,u=a(t,i,p),c=0;Math.abs(r-u)>s&&o>c;)r>u?h=p:l=p,p=(l+h)/2,u=a(t,i,p),++c;return a(e,n,p)}function h(t,e,i,n){return 0===i?t:(i>0?e>t&&(e-=360):t>e&&(e+=360),this.linear(t,e,n))}t.linear=e,t.quadratic=i,t.cubic=n,t.quartic=r,t.quintic=s,t.bezier=o,t.angleLinear=h}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function e(){this._folders=new t.IdNameMap,this._tags=new t.IdNameMap,this._entities=new t.IdNameMap}return e.prototype.addFolder=function(t){this._folders.add(t,t.id,t.name)},e.prototype.getFolderById=function(t){return this._folders.getById(t)},e.prototype.getFolderByName=function(t){return this._folders.getByName(t)},e.prototype.addEntity=function(t){this._entities.add(t,t.id,t.name)},e.prototype.getEntityById=function(t){return this._entities.getById(t)},e.prototype.getEntityByName=function(t){return this._entities.getByName(t)},e.prototype.addTag=function(t){this._tags.add(t,t.id,t.name)},e.prototype.getTagById=function(t){return this._tags.getById(t)},e.prototype.getTagByName=function(t){return this._tags.getByName(t)},Object.defineProperty(e.prototype,"tagsLength",{get:function(){return this._tags.length},enumerable:!0,configurable:!0}),e}();t.Spriter=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function e(){this.timeline=-1,this.timelineKey=-1,this.transformed=new t.SpatialInfo}return e.prototype.setOn=function(t){this._on=t},Object.defineProperty(e.prototype,"on",{get:function(){return this._on},enumerable:!0,configurable:!0}),e.prototype.setKey=function(i,n,r,s){this.timeline=r,this.timelineKey=s;var a=n.getTimelineById(r);this.name=a.name,this.objectInfo=-1===a.objectRef?null:i.getObjectInfoById(a.objectRef);var o=a.at(s),h=a.at(s+1,n.loopType!==t.eAnimationLooping.NO_LOOPING);this.key=o,this.timeFrom=o.time,this.timeTo=h.time,this.timeTo<this.timeFrom&&(this.timeTo=n.length),this.from=o.info,this.to=h.info,this.updateMask=0,Math.abs(this.from.x-this.to.x)>.001&&(this.updateMask+=e.UPDATE_X),Math.abs(this.from.y-this.to.y)>.001&&(this.updateMask+=e.UPDATE_Y),Math.abs(this.from.scaleX-this.to.scaleX)>.001&&(this.updateMask+=e.UPDATE_SCALE_X),Math.abs(this.from.scaleY-this.to.scaleY)>.001&&(this.updateMask+=e.UPDATE_SCALE_Y),Math.abs(this.from.pivotX-this.to.pivotX)>.001&&(this.updateMask+=e.UPDATE_PIVOT_X),Math.abs(this.from.pivotY-this.to.pivotY)>.001&&(this.updateMask+=e.UPDATE_PIVOT_Y),Math.abs(this.from.alpha-this.to.alpha)>.001&&(this.updateMask+=e.UPDATE_ALPHA),Math.abs(this.from.angle-this.to.angle)>.001&&(this.updateMask+=e.UPDATE_ANGLE),this.transformed.x=this.from.x,this.transformed.y=this.from.y,this.transformed.scaleX=this.from.scaleX,this.transformed.scaleY=this.from.scaleY,this.transformed.pivotX=this.from.pivotX,this.transformed.pivotY=this.from.pivotY,this.transformed.angle=this.from.angle,this.transformed.alpha=this.from.alpha},e.prototype.tween=function(i){var n=this.updateMask>0?this.getTweenTime(i):0;this.transformed.x=(this.updateMask&e.UPDATE_X)>0?t.linear(this.from.x,this.to.x,n):this.from.x,this.transformed.y=(this.updateMask&e.UPDATE_Y)>0?t.linear(this.from.y,this.to.y,n):this.from.y,this.transformed.scaleX=(this.updateMask&e.UPDATE_SCALE_X)>0?t.linear(this.from.scaleX,this.to.scaleX,n):this.from.scaleX,this.transformed.scaleY=(this.updateMask&e.UPDATE_SCALE_Y)>0?t.linear(this.from.scaleY,this.to.scaleY,n):this.from.scaleY,this.transformed.pivotX=(this.updateMask&e.UPDATE_PIVOT_X)>0?t.linear(this.from.pivotX,this.to.pivotX,n):this.from.pivotX,this.transformed.pivotY=(this.updateMask&e.UPDATE_PIVOT_Y)>0?t.linear(this.from.pivotY,this.to.pivotY,n):this.from.pivotY,this.transformed.alpha=(this.updateMask&e.UPDATE_ALPHA)>0?t.linear(this.from.alpha,this.to.alpha,n):this.from.alpha,this.transformed.angle=(this.updateMask&e.UPDATE_ANGLE)>0?t.angleLinear(this.from.angle,this.to.angle,this.key.spin,n):this.from.angle},e.prototype.update=function(t){this.transformed.angle*=Phaser.Math.sign(t.scaleX)*Phaser.Math.sign(t.scaleY),this.transformed.angle+=t.angle,this.transformed.scaleX*=t.scaleX,this.transformed.scaleY*=t.scaleY,this.scalePosition(t.scaleX,t.scaleY),this.rotatePosition(t.angle),this.translatePosition(t.x,t.y),this.transformed.alpha*=t.alpha},e.prototype.scalePosition=function(t,e){this.transformed.x*=t,this.transformed.y*=e},e.prototype.rotatePosition=function(t){var e=this.transformed.x,i=this.transformed.y;if(0!==e||0!==i){var n=t*(Math.PI/180),r=Math.cos(n),s=Math.sin(n);this.transformed.x=e*r-i*s,this.transformed.y=e*s+i*r}},e.prototype.translatePosition=function(t,e){this.transformed.x+=t,this.transformed.y+=e},e.prototype.getTweenTime=function(e){if(1===this.key.curveType)return 0;var i=Phaser.Math.clamp((e-this.timeFrom)/(this.timeTo-this.timeFrom),0,1);switch(this.key.curveType){case 0:return i;case 2:return t.quadratic(0,this.key.c1,1,i);case 3:return t.cubic(0,this.key.c1,this.key.c2,1,i);case 4:return t.quartic(0,this.key.c1,this.key.c2,this.key.c3,1,i);case 5:return t.quintic(0,this.key.c1,this.key.c2,this.key.c3,this.key.c4,1,i);case 6:return t.bezier(this.key.c1,this.key.c2,this.key.c3,this.key.c4,i)}return 0},e.UPDATE_X=1,e.UPDATE_Y=2,e.UPDATE_SCALE_X=4,e.UPDATE_SCALE_Y=8,e.UPDATE_PIVOT_X=16,e.UPDATE_PIVOT_Y=32,e.UPDATE_ANGLE=64,e.UPDATE_ALPHA=128,e}();t.SpriterBone=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n,r,s,a,o){e.call(this,i,null),this.onLoop=new Phaser.Signal,this.onFinish=new Phaser.Signal,this.onSound=new Phaser.Signal,this.onEvent=new Phaser.Signal,this.onTagChange=new Phaser.Signal,this.onVariableSet=new Phaser.Signal,this._mainlineStepper=new t.LineStepper,this._lineSteppers=[],this._lineSteppersCount=0,this._bones=[],this._objects=[],this._tags=0,this._vars=[],this._paused=!1,this._spriter=n,this._entityName=s,this._entity=n.getEntityByName(s),this._textureKey=r,this._root=new t.SpatialInfo;for(var h=0;h<this._entity.variablesLength;h++)this._vars[h]=this._entity.getVariableById(h).clone();this._charMapStack=new t.CharMapStack(this._entity),void 0===o&&(o=100),this.setAnimationSpeedPercent(o),void 0===a||null===a?this.playAnimationById(0):"number"==typeof a?this.playAnimationById(a):this.playAnimationByName(a)}return __extends(i,e),Object.defineProperty(i.prototype,"spriter",{get:function(){return this._spriter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"entity",{get:function(){return this._entity},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"charMapStack",{get:function(){return this._charMapStack},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this._paused},set:function(t){this.paused=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationsCount",{get:function(){return this._entity.animationsLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentAnimationName",{get:function(){return this._animationName},enumerable:!0,configurable:!0}),i.prototype.pushCharMap=function(t){this._charMapStack.push(t),this.resetSprites()},i.prototype.removeCharMap=function(t){this._charMapStack.remove(t),this.resetSprites()},i.prototype.clearCharMaps=function(){this._charMapStack.reset(),this.resetSprites()},i.prototype.resetSprites=function(){for(var t=0;t<this._objects.length;t++)this._objects[t].resetFile()},i.prototype.isTagOn=function(t){return this.isTagOnById(this._spriter.getTagByName(t).id)},i.prototype.isTagOnById=function(t){return(this._tags&1<<t)>0},i.prototype.getVariable=function(t){return this.getVariableById(this._entity.getVariableByName(t).id)},i.prototype.getVariableById=function(t){return this._vars[t]},i.prototype.getObject=function(t){for(var e=0;e<this._objects.length;e++){var i=this._objects[e];if(i.name===t)return i}return null},i.prototype.setAnimationSpeedPercent=function(t){void 0===t&&(t=100),this._animationSpeed=t/100},i.prototype.playAnimationById=function(t){var e=this._entity.getAnimationById(t);void 0!==e&&null!==e&&this.playAnimation(e)},i.prototype.playAnimationByName=function(t){var e=this._entity.getAnimationByName(t);void 0!==e&&null!==e&&this.playAnimation(e)},i.prototype.playAnimation=function(t){this._animationName=t.name,this._animation=t,this._finished=!1,this._mainlineStepper.reset(),this._mainlineStepper.line=this._animation.mainline,this._time=0,this.resetLines(),this._tags=0;for(var e=0;e<this._vars.length;e++)this._vars[e].reset();this.loadKeys(this._animation.mainline.at(0),!0),this.updateCharacter()},i.prototype.resetLines=function(){this._lineSteppersCount=0;for(var e=0;e<this._animation.linesLength;e++){var i=this._animation.getLineById(e);this._lineSteppersCount>=this._lineSteppers.length&&(this._lineSteppers[this._lineSteppersCount]=new t.LineStepper);var n=this._lineSteppers[this._lineSteppersCount++];n.reset(),n.line=i}},i.prototype.setBones=function(e,i){void 0===i&&(i=!1);for(var n=0;n<this._bones.length;n++)void 0!==this._bones[n]&&this._bones[n].setOn(!1);for(var n=0;n<e.length;n++){var r=e[n];if(void 0===this._bones[r.id]){var s=new t.SpriterBone;s.type=1,this._bones[r.id]=s}var a=this._bones[r.id];a.setOn(!0),a.parent=r.parent,(a.timelineKey!==r.key||a.timeline!==r.timeline||i)&&a.setKey(this._entity,this._animation,r.timeline,r.key)}},i.prototype.setObjects=function(e,i){void 0===i&&(i=!1);for(var n=0;n<this._objects.length;n++)void 0!==this._objects[n]&&this._objects[n].setOn(!1);for(var r=!1,n=0;n<e.length;n++){var s=e[n],a=null,o=null;void 0===this._objects[s.id]?(o=new Phaser.Sprite(this.game,0,0,this._textureKey),a=new t.SpriterObject(this,o),this._objects[s.id]=a,this.add(o)):(a=this._objects[s.id],o=a.sprite),a.parent=s.parent,a.type=this._animation.getTimelineById(s.timeline).objectType,0===a.type&&(a.setOn(!0),a.sprite.z!==s.z&&(a.sprite.z=s.z,r=!0)),(a.timelineKey!==s.key||a.timeline!==s.timeline||i)&&a.setKey(this._entity,this._animation,s.timeline,s.key)}r&&this.sort()},i.prototype.loadKeys=function(t,e){void 0===e&&(e=!1),this.setBones(t.boneRefs,e),this.setObjects(t.objectRefs,e)},i.prototype.updateAnimation=function(){if(!this._paused&&!this._finished){var e=this._mainlineStepper;this._time>this._animation.length&&(this._animation.loopType===t.eAnimationLooping.NO_LOOPING?(this._time=this._animation.length,this._finished=!0):(this._time-=this._animation.length,this.onLoop.dispatch(this)));for(var i;null!==(i=e.step(this._time));)this.loadKeys(i),e.lastTime=i.time;this.updateCharacter(),this.updateLines(),this._finished&&this.onFinish.dispatch(this),this._time+=this.game.time.physicsElapsedMS*this._animationSpeed}},i.prototype.updateCharacter=function(){for(var t=0;t<this._bones.length;t++){var e=this._bones[t];if(e.on){var i=-1===e.parent?this._root:this._bones[e.parent].transformed;e.tween(this._time),e.update(i)}}for(var t=0;t<this._objects.length;t++){var n=this._objects[t];if(n.on){var i=-1===n.parent?this._root:this._bones[n.parent].transformed;n.tween(this._time),n.update(i)}}},i.prototype.updateLines=function(){for(var e=this._lineSteppersCount-1;e>=0;e--)for(var i,n=this._lineSteppers[e],r=n.line;null!==(i=n.step(this._time));){switch(r.type){case t.eTimelineType.SOUND_LINE:this.onSound.dispatch(this,r.name);break;case t.eTimelineType.EVENT_LINE:this.onEvent.dispatch(this,r.name);break;case t.eTimelineType.TAG_LINE:var s=i.tagsOn,a=this._tags^s;this._tags=s;for(var o=0;o<this._spriter.tagsLength;o++){var h=1<<o;a&h&&this.onTagChange.dispatch(this,this._spriter.getTagById(o).name,(s&h)>0)}break;case t.eTimelineType.VAR_LINE:var l=i.value,p=this._vars[r.varDefId];p.value=l,this.onVariableSet.dispatch(this,p)}n.lastTime=i.time}},i}(Phaser.Group);t.SpriterGroup=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(e,i){t.call(this),this._spriter=e.spriter,this._charMapStack=e.charMapStack,this._sprite=i}return __extends(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this._sprite;
},enumerable:!0,configurable:!0}),e.prototype.setOn=function(e){t.prototype.setOn.call(this,e),this._sprite.exists=e,this._sprite.visible=e&&!this._hide},e.prototype.setKey=function(e,i,n,r){if(t.prototype.setKey.call(this,e,i,n,r),0===this.type){var s=this.key,a=this._spriter.getFolderById(s.folder).getFileById(s.file);this._file=a,this.setFile(a)}else this._file=null},e.prototype.resetFile=function(){0===this.type&&this.setFile(this._file)},e.prototype.setFile=function(t){t=this._charMapStack.getFile(t),null!==t?(this._hide=!1,this._sprite.frameName=t.name):(this._hide=!0,this._sprite.visible=!1)},e.prototype.update=function(e){t.prototype.update.call(this,e),this.updateSprite()},e.prototype.updateSprite=function(){var t=this.transformed,e=this.sprite;e.position.set(t.x,t.y),e.scale.set(t.scaleX,t.scaleY),e.anchor.set(t.pivotX,t.pivotY),e.alpha=t.alpha,e.angle=t.angle},e}(t.SpriterBone);t.SpriterObject=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e){this._id=t,this._name=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();t.Item=e}(Spriter||(Spriter={}));var Spriter;!function(t){!function(t){t[t.NO_LOOPING=0]="NO_LOOPING",t[t.LOOPING=1]="LOOPING"}(t.eAnimationLooping||(t.eAnimationLooping={}));var e=(t.eAnimationLooping,function(e){function i(i,n,r,s){e.call(this,i,n),this._length=r,this._loopType=s,this._timelines=new t.IdNameMap,this._lines=new t.IdNameMap}return __extends(i,e),Object.defineProperty(i.prototype,"mainline",{get:function(){return this._mainline},set:function(t){this._mainline=t},enumerable:!0,configurable:!0}),i.prototype.addTimeline=function(t){this._timelines.add(t,t.id,t.name)},i.prototype.getTimelineById=function(t){return this._timelines.getById(t)},i.prototype.getTimelineByName=function(t){return this._timelines.getByName(t)},i.prototype.addLine=function(t){this._lines.add(t,this._lines.length,t.name)},i.prototype.getLineById=function(t){return this._lines.getById(t)},i.prototype.getLineByName=function(t){return this._lines.getByName(t)},Object.defineProperty(i.prototype,"linesLength",{get:function(){return this._lines.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loopType",{get:function(){return this._loopType},enumerable:!0,configurable:!0}),i}(t.Item));t.Animation=e}(Spriter||(Spriter={}));var Spriter;!function(t){!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.MAIN_LINE=1]="MAIN_LINE",t[t.TIME_LINE=2]="TIME_LINE",t[t.SOUND_LINE=3]="SOUND_LINE",t[t.EVENT_LINE=4]="EVENT_LINE",t[t.TAG_LINE=5]="TAG_LINE",t[t.VAR_LINE=6]="VAR_LINE"}(t.eTimelineType||(t.eTimelineType={}));var e=t.eTimelineType,i=function(t){function i(i,n){void 0===n&&(n=null),t.call(this,i,n),this._type=e.UNKNOWN}return __extends(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),i.prototype.add=function(t){(null===this._keys||void 0===this._keys)&&(this._keys=[]),this._keys.push(t)},i.prototype.at=function(t,e){if(void 0===e&&(e=!0),0>t)return null;var i=this._keys.length;return t>=i&&(e?t%=i:t=i-1),this._keys[t]},i}(t.Item);t.Baseline=i}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.put=function(t,e){void 0===this._map&&(this._map={}),void 0!==this._map[t],this._map[t]=e},e.prototype.value=function(t){return this._map[t]},e}(t.Item);t.CharMap=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t){this._stack=[],this._length=0,this._entity=t}return t.prototype.reset=function(){this._length=0},t.prototype.push=function(t){var e=this.getCharMap(t);this._stack[this._length++]=e},t.prototype.remove=function(t){var e=this.getCharMap(t),i=this.findCharMap(e);if(-1!==i){for(var n=i;n<this._length-2;n++)this._stack[n]=this._stack[n+1];this._stack[--this._length]=null}},t.prototype.getFile=function(t){for(var e=this._length-1;e>=0;e--){var i=this._stack[e].value(t.name);if(void 0!==i)return i}return t},t.prototype.getCharMap=function(t){var e=this._entity.getCharMapByName(t);return e},t.prototype.findCharMap=function(t){for(var e=0;e<this._length;e++)if(this._stack[e]===t)return e;return-1},t}();t.CharMapStack=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n){e.call(this,i,n),this._objectInfos=new t.IdNameMap,this._charMaps=new t.IdNameMap,this._variables=new t.IdNameMap,this._animations=new t.IdNameMap}return __extends(i,e),i.prototype.addObjectInfo=function(t){this._objectInfos.add(t,t.id,t.name)},i.prototype.getObjectInfoById=function(t){return this._objectInfos.getById(t)},i.prototype.getObjectInfoByName=function(t){return this._objectInfos.getByName(t)},i.prototype.addCharMap=function(t){this._charMaps.add(t,t.id,t.name)},i.prototype.getCharMapById=function(t){return this._charMaps.getById(t)},i.prototype.getCharMapByName=function(t){return this._charMaps.getByName(t)},Object.defineProperty(i.prototype,"charMapsLength",{get:function(){return this._charMaps.length},enumerable:!0,configurable:!0}),i.prototype.addVariable=function(t){this._variables.add(t,t.id,t.name)},i.prototype.getVariableById=function(t){return this._variables.getById(t)},i.prototype.getVariableByName=function(t){return this._variables.getByName(t)},Object.defineProperty(i.prototype,"variablesLength",{get:function(){return this._variables.length},enumerable:!0,configurable:!0}),i.prototype.addAnimation=function(t){this._animations.add(t,t.id,t.name)},i.prototype.getAnimationById=function(t){return this._animations.getById(t)},i.prototype.getAnimationByName=function(t){return this._animations.getByName(t)},Object.defineProperty(i.prototype,"animationsLength",{get:function(){return this._animations.length},enumerable:!0,configurable:!0}),i}(t.Item);t.Entity=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(e,i,n,r){t.call(this,e,i),this._pivotX=n,this._pivotY=r}return __extends(e,t),Object.defineProperty(e.prototype,"pivotX",{get:function(){return this._pivotX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotY",{get:function(){return this._pivotY},enumerable:!0,configurable:!0}),e}(t.Item);t.File=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n){e.call(this,i,n),this._files=new t.IdNameMap}return __extends(i,e),i.prototype.addFile=function(t){this._files.add(t,t.id,t.name)},i.prototype.getFileById=function(t){return this._files.getById(t)},i.prototype.getFileByName=function(t){return this._files.getByName(t)},i}(t.Item);t.Folder=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e){this._id=t,this._time=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),t}();t.Key=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n,r){e.call(this,i,n),this._info=new t.SpatialInfo,this._spin=r,this.setCurve(0)}return __extends(i,e),i.prototype.setCurve=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this._curveType=t,this._c1=e,this._c2=i,this._c3=n,this._c4=r},Object.defineProperty(i.prototype,"spin",{get:function(){return this._spin},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"curveType",{get:function(){return this._curveType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c1",{get:function(){return this._c1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c2",{get:function(){return this._c2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c3",{get:function(){return this._c3},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c4",{get:function(){return this._c4},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),i}(t.Key);t.KeyTimeline=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(t.KeyTimeline);t.KeyBone=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(){t.apply(this,arguments),this._boneRefs=[],this._objectRefs=[]}return __extends(e,t),Object.defineProperty(e.prototype,"boneRefs",{get:function(){return this._boneRefs},enumerable:!0,configurable:!0}),e.prototype.addBoneRef=function(t){this._boneRefs.push(t)},Object.defineProperty(e.prototype,"objectRefs",{get:function(){return this._objectRefs},enumerable:!0,configurable:!0}),e.prototype.addObjectRef=function(t){this._objectRefs.push(t)},e}(t.Key);t.KeyMainline=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setFolderAndFile=function(t,e){this._folder=t,this._file=e},Object.defineProperty(e.prototype,"folder",{get:function(){return this._folder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this._file},enumerable:!0,configurable:!0}),e}(t.KeyTimeline);t.KeyObject=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),Object.defineProperty(e.prototype,"tagsOn",{get:function(){return this._tagsOn},set:function(t){this._tagsOn=t},enumerable:!0,configurable:!0}),e}(t.Key);t.KeyTag=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(e,i,n){t.call(this,e,i),this._value=n}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(t.Key);t.KeyVariable=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(e,i,n,r,s,a,o){t.call(this,e,i),this._type=n,this._width=r,this._height=s,this._pivotX=a,this._pivotY=o}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotX",{get:function(){return this._pivotX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotY",{get:function(){return this._pivotY},enumerable:!0,configurable:!0}),e}(t.Item);t.ObjectInfo=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(t,e,i,n,r){void 0===r&&(r=0),this.id=t,this.parent=e,this.timeline=i,this.key=n,this.z=r}return t}();t.Ref=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(){this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.pivotX=0,this.pivotY=0,this.alpha=1,this.angle=0}return t}();t.SpatialInfo=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=-1),e.call(this,i,n),this.type=t.eTimelineType.TIME_LINE,this._objectType=r,this._objectRef=s}return __extends(i,e),Object.defineProperty(i.prototype,"objectType",{get:function(){return this._objectType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"objectRef",{get:function(){return this._objectRef},enumerable:!0,configurable:!0}),i}(t.Baseline);t.Timeline=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(){function t(){}return t.getObjectTypeForName=function(e){var i=t.nameToObjectType[e];return i},t.getCurveTypeForName=function(e){var i=t.nameToCurveType[e];return i},t.getVariableTypeForName=function(e){var i=t.nameToVariableType[e];return i},t.nameToObjectType={sprite:0,bone:1,box:2,point:3,sound:4},t.nameToCurveType={instatnt:1,linear:0,quadratic:2,cubic:3,quartic:4,quintic:5,bezier:6},t.nameToVariableType={"int":0,"float":1,string:2},t}();t.Types=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(t){function e(e,i,n,r){t.call(this,e,i),this._type=n,this._default=r,this.reset()}return __extends(e,t),e.prototype.clone=function(){return new e(this.id,this.name,this.type,this._default)},e.prototype.reset=function(){this.value=this._default},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){0===this._type?this._value=Math.floor(t):this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"int",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"float",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(t.Item);t.Variable=e}(Spriter||(Spriter={}));var Spriter;!function(t){var e=function(e){function i(i,n){e.call(this,i,null),this._varDefId=n,this.type=t.eTimelineType.VAR_LINE}return __extends(i,e),Object.defineProperty(i.prototype,"varDefId",{get:function(){return this._varDefId},enumerable:!0,configurable:!0}),i}(t.Baseline);t.Varline=e}(Spriter||(Spriter={}));var Ridhwan;!function(t){var e=function(t){function e(){t.call(this),this._ignoreNextResize=!1}return __extends(e,t),e.prototype.init=function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0;var t=Utils.ScreenUtils.screenMetrics;this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.scale.setMinMax(.25*this.game.width,.25*this.game.height,2.5*this.game.width,2.5*this.game.height),this.scale.setUserScale(t.scaleX,t.scaleY),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.setResizeCallback(this.gameResized,this)):(this.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.scale.setUserScale(t.scaleX,t.scaleY),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.forceOrientation(!0,!1),this.scale.setResizeCallback(this.gameResized,this),this.scale.onOrientationChange.add(this.orientationChange,this)),this.orientationChange(this.scale,"",!0)},e.prototype.create=function(){this.game.state.start("Preloader",!0,!1)},e.prototype.gameResized=function(t,e){},e.prototype.orientationChange=function(t,e,i){},e}(Phaser.State);t.Boot=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(e){function i(){e.call(this),this._restartCounter=2}return __extends(i,e),i.prototype.create=function(){this._once=!1,this._pressed=!1;var t=this.add.image(0,0,"Tut");t.inputEnabled=!0,t.events.onInputUp.add(function(){this._pressed=!0},this),this._space=this.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR)},i.prototype.onGameeRestart=function(){--this._restartCounter<=0&&(this._pressed=!0,Utils.AudioUtils.playSound("rainbow"))},i.prototype.onGameeButtonDown=function(t){this._pressed=!0,Utils.AudioUtils.playSound("rainbow")},i.prototype.update=function(){this._once||(this._space.justDown&&(this._pressed=!0),this._pressed&&(this._once=!0,t.Global.GAMEE&&Gamee.Gamee.instance.gameStart(),this.game.state.start("Play")))},i}(Phaser.State);t.Menu=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(e){function i(){e.call(this),this._ready=!1}return __extends(i,e),i.prototype.preload=function(){var e="assets/sfx/";if(this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){for(var i in t.Sounds.AUDIO_JSON.spritemap)this.load.audio(i,e+i+".mp3");this.load.audio("Music",e+"Music.mp3")}else{var n=0;this.game.device.iOS&&(n=.1),this.load.audiosprite("Sfx",t.Sounds.AUDIO_JSON.resources,null,t.Sounds.AUDIO_JSON),this.load.audio("Music",[e+"Music.ogg",e+"Music.m4a"])}e="assets/",this.load.image("Background",e+"Background.jpg"),this.load.atlas("Sprites",e+"Sprites.png",e+"Sprites.json"),this.load.xml("NumbersData",e+"numbers.xml"),this.load.xml("Ponik",e+"ponik.xml"),this.load.json("Config",e+"config.json")},i.prototype.loadUpdate=function(){this.setLoadingText(this.load.progress)},i.prototype.create=function(){this.cache.addBitmapFontFromImage("Numbers",null,"Sprites",this.cache.getXML("NumbersData"),"xml");var e=new Spriter.Loader,i=new Spriter.SpriterXml(this.game.cache.getXML("Ponik"));t.Global.spriterPonik=e.load(i),this.readConfig();var n=this.add.audio("Music");if(n.volume=.75,Utils.AudioUtils.addMusic("Music",n),this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){Utils.AudioUtils.setSounds(null);for(var r in t.Sounds.AUDIO_JSON.spritemap){var s=this.add.audio(r);s.allowMultiple=!0,Utils.AudioUtils.addSound(r,s)}}else{var a=this.add.audioSprite("Sfx");for(var r in t.Sounds.AUDIO_JSON.spritemap){var s=a.sounds[r];s.allowMultiple=!0}Utils.AudioUtils.setSounds(a)}},i.prototype.readConfig=function(){var e=this.game.cache.getJSON("Config");for(var i in e)t.Gameplay[i]=e[i]},i.prototype.update=function(){this._ready===!1&&(this._ready=!0,this.game.state.start("Play"))},i.prototype.setLoadingText=function(t){},i}(Phaser.State);t.Preloader=e}(Ridhwan||(Ridhwan={}));var Ridhwan;!function(t){var e=function(e){function i(){e.call(this),this._gameOver=!1,this._runFromRestart=!1}return __extends(i,e),i.prototype.create=function(){this.camera.bounds=null,this.stage.backgroundColor=8421504,this.physics.startSystem(Phaser.Physics.P2JS),this.game.physics.p2.gravity.y=t.Gameplay.GRAVITY,this._obstaclesCollisionGroup=this.game.physics.p2.createCollisionGroup(),this._playerCollisionGroup=this.physics.p2.createCollisionGroup(),this._bonusCollisionGroup=this.physics.p2.createCollisionGroup(),this._button=this.game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR),this.game.input.onDown.add(function(){this._buttonDown=!0},this),this.game.input.onUp.add(function(){this._buttonDown=!1},this),this._bg=new t.BgLayer(this.game,this.world,"Background",0,0,.2),this._generator=new t.Generator(this.game,this.finishObstacleSetup,this),this.world.add(this._generator.obstaclesLayer),this.world.add(this._generator.bonusLayer),this._trail=new t.Trail(this.game,this.world),this._player=new t.Player(this.game,this),this.world.add(this._player),this._player.setPosition(100,320),this._player.setCollisionGroup(this._playerCollisionGroup),this._player.collides([this._obstaclesCollisionGroup,this._bonusCollisionGroup]);var e=this._player.body;e.onBeginContact.add(this.resolveCollision,this),e.onEndContact.add(this.endCollision,this),this._bar=new t.Bar(this.game,this.world);var i=new Phaser.Sprite(this.game,0,0,"Sprites","Blood");i.fixedToCamera=!0,i.width=i.height=640,i.alpha=.5,i.exists=!1,this._blood=i,this.world.add(i),this.createEmitters(),this.reset(),e.data.gravityScale=0},i.prototype.onGameePause=function(){this.game.paused=!0},i.prototype.onGameeUnpause=function(){this.game.paused=!1},i.prototype.onGameeRestart=function(){t.Global.game.paused=!1,Gamee.Gamee.instance.gameStart(),this.reset(),Utils.AudioUtils.playSound("rainbow")},i.prototype.onGameeButtonDown=function(t){var e=Gamee.Gamee.instance;e.gameRunning?this._buttonDown=!0:this._runFromRestart||(e.gameStart(),this.reset(),Utils.AudioUtils.playSound("rainbow"))},i.prototype.onGameeButtonUp=function(t){Gamee.Gamee.instance;this._buttonDown=!1},i.prototype.reset=function(){this._gameOver=!1,this._buttonDown=!1,this._thurstSoundOn=!1,Utils.AudioUtils.stopSound("jet"),this.camera.x=0,this._generator.reset(),this.resetPlayer(),this._trail.reset(),this._boostTime=0,this._collisionRequest=0,this._afterBoostTime=0,this._player.updateShield(0),this._thurstEmitter.killAllParticles(),this._thurstEmitterState=0,this._pickEmitter.killAllParticles(),this._colorEmitter.killAllParticles(),this._glitterEmitter.killAllParticles(),this._blood.visible=!1,this._bloodOn=!1,this._bloodTime=0,this._nextHurtTime=0,this._bar.setValue(t.Gameplay.BAR_TIME_MAX),this._score=0,this._lastScoreTime=0,Utils.AudioUtils.playMusic("Music")},i.prototype.resetPlayer=function(){this._player.setPosition(-100,320),this._player.setCollisionGroup(this._playerCollisionGroup),this._player.collides([this._obstaclesCollisionGroup,this._bonusCollisionGroup]);var t=this._player.body;t.data.gravityScale=1,t.data.velocity[1]=0,this._player.pony.angle=0,this._safeTime=this.game.time.time+1500},Object.defineProperty(i.prototype,"safeTime",{get:function(){return this._safeTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameOver",{get:function(){return this._gameOver},enumerable:!0,configurable:!0}),i.prototype.update=function(){var e=this._player.body,i=1,n=1;if(this._boostTime>0){var r=this._boostTime;this._boostTime=Math.max(0,this._boostTime-this.time.elapsedMS);var s=this._boostTime;Math.floor(r/1e3)!==Math.floor(this._boostTime/1e3)&&Utils.AudioUtils.playSound("rainbow");var a=s>t.Gameplay.BOOST_TIME-t.Gameplay.BOOST_ENTRANCE_TIME?1-(s-(t.Gameplay.BOOST_TIME-t.Gameplay.BOOST_ENTRANCE_TIME))/t.Gameplay.BOOST_ENTRANCE_TIME:s<t.Gameplay.BOOST_ENTRANCE_TIME?s/t.Gameplay.BOOST_ENTRANCE_TIME:1,o=Math.sin(Math.PI/2*a);this._player.updateShield(o),i=1+o,n=1+o*(t.Gameplay.BOOST_MOVE_MULTIPLIER-1),this.emitThurst(!0,o,i),this._boostTime<=0?(e.data.gravityScale=1,this._collisionRequest=2,this._afterBoostTime=t.Gameplay.AFTER_BOOST_TIME,this._colorEmitter.stopFlow(),this._glitterEmitter.stopFlow()):(e.data.gravityScale=0,e.data.velocity[1]=0)}if(this._trail.moveTo(e.x-3,e.y+10,i),this._gameOver)this._player.pony.angle=Math.min(1.5*-e.data.velocity[1],90);else{if(this.camera.x=Math.max(0,e.x-125),this._generator.generate(this.camera.x,this._boostTime>0),this._bg.updatePosition(this.camera.x),t.Global.GAMEE&&!Gamee.Gamee.instance.gameRunning)return;this.swingBonuses(),this._afterBoostTime>0&&(this._afterBoostTime-=this.time.elapsedMS),1===this._collisionRequest?(e.removeCollisionGroup(this._obstaclesCollisionGroup,!1),this._collisionRequest=0):2===this._collisionRequest&&this._afterBoostTime<=0&&(this._player.collides(this._obstaclesCollisionGroup),this._collisionRequest=0);var h=(this._button.isDown||this._buttonDown)&&this._bar.value>0&&this._boostTime<=0;h&&!this._thurstSoundOn?(Utils.AudioUtils.playSound("rainbow"),this._thurstSoundOn=!0):!h&&this._thurstSoundOn&&(Utils.AudioUtils.stopSound("rainbow"),this._thurstSoundOn=!1),this._player.move(h,n),this.emitThurst(h,e.data.velocity[1],i),this._boostTime<=0&&this._bar.adjustValue(-this.time.elapsedMS*t.Gameplay.BAR_TIME_DECREASE_MULTIPLIER),this._bloodOn&&this._nextHurtTime<this.game.time.time&&(this._bar.adjustValue(-t.Gameplay.BAR_TIME_HURT_SUB_ONETIME),Utils.AudioUtils.playSound("crash"),this._nextHurtTime=this.time.time+t.Gameplay.BAR_TIME_HURT_NEXT_TIME);var l=Math.floor(this._lastScoreTime/1e3);this._lastScoreTime+=this.time.elapsedMS,Math.floor(this._lastScoreTime/1e3)>l&&this.onScore(1),this._bar.value<=0&&this.setGameOver()}this._bloodTime>0&&!this._bloodOn&&(this._bloodTime-=this.time.elapsedMS)<=0&&(this._blood.visible=!1)},i.prototype.finishObstacleSetup=function(t){if(0===t.tag||1===t.tag||2===t.tag)t.setCollisionGroup(this._obstaclesCollisionGroup),t.collides(this._playerCollisionGroup);else{t.setCollisionGroup(this._bonusCollisionGroup),t.collides(this._playerCollisionGroup);for(var e=t.body.data.shapes,i=0;i<e.length;i++)e[i].sensor=!0}},i.prototype.resolveCollision=function(e,i,n,r,s){if(!this._gameOver){var a=i.parent.sprite,o=a.tag;3===o||4===o?a.remove||(3===o?(this._bar.adjustValue(t.Gameplay.BAR_TIME_CANDY_ADD),this.onScore(3),Utils.AudioUtils.playSound("sweet")):(this._bar.adjustValue(t.Gameplay.BAR_TIME_CANDY_ADD),this._boostTime=t.Gameplay.BOOST_TIME,this._collisionRequest=1,this._afterBoostTime=0,this._bloodOn=!1,this._bloodTime=1e-5,this._colorEmitter.flow(100,3,-1,!0),this._glitterEmitter.flow(50,6,-1,!0),this.onScore(10),Utils.AudioUtils.playSound("globe"),Utils.AudioUtils.playSound("whinny")),this._pickEmitter.emitAtObject(a),this._pickEmitter.emitParticle(),a.remove=!0):(this._blood.visible=!0,this._bloodOn=!0,this._bloodTime=t.Gameplay.BLOOD_TIME,this._nextHurtTime<this.time.time&&(this._bar.adjustValue(-t.Gameplay.BAR_TIME_HURT_SUB_ONETIME),Utils.AudioUtils.playSound("crash"),this._nextHurtTime=this.time.time+t.Gameplay.BAR_TIME_HURT_NEXT_TIME))}},i.prototype.endCollision=function(t,e,i,n,r){var s=e.parent.sprite,a=s.tag;3!==a&&4!==a&&(this._bloodOn=!1)},i.prototype.swingBonuses=function(){for(var t=this._generator.bonusLayer,e=t.length-1;e>=0;e--)t.getChildAt(e).offset()},i.prototype.setGameOver=function(){if(!this._gameOver){this._gameOver=!0,Utils.AudioUtils.stopMusic(),this.emitThurst(!1,0,1),this._boostTime=1e-6,Utils.AudioUtils.playSound("fuelend");var e=this._player.body;e.clearCollision(!0,!1),e.data.gravityScale=1,this.time.events.add(1500,function(){this._stopUpdate=!0,t.Global.GAMEE?(this._runFromRestart=!0,Gamee.Gamee.instance.gameOver()):this.reset()},this)}},i.prototype.onScore=function(e){this._score+=e,t.Global.GAMEE&&(Gamee.Gamee.instance.score=this._score)},i.prototype.emitThurst=function(t,e,i){var n=t?1:e>0?2:0;n!==this._thurstEmitterState&&(this._thurstEmitterState=n,0===n?this._thurstEmitter.stopFlow():2===n?this._thurstEmitter.flow(100,1,-1,!0):this._thurstEmitter.flow(80/i,2,-1,!0))},i.prototype.createEmitters=function(){var t=new Particles.ParticlesEmitter(this.game,0,0,32);t.lifetime=.8,t.setXSpeed(-100,-50),t.setYSpeed(-50,50),t.setAngularSpeed(-90,90),t.setScale(.25,.5),t.setScaleChange(Particles.eParameterChangeType.IN_TIME,1,.8),t.makeParticles("Sprites","StarPtc",32),t.emitAt(0,0),t.emitObject=this._player,this.world.addAt(t,this.world.getChildIndex(this._trail)+1),this._thurstEmitter=t,t=new Particles.ParticlesEmitter(this.game,0,0,4),t.particleClass=Particles.AnimatedParticle,t.lifetime=.25,t.makeParticles("Sprites","pick",4,[i.ANIM_PICK]),t.setAngle(0,360),t.setAlphaChange(Particles.eParameterChangeType.IN_TIME,-1,.3),this.world.addAt(t,this.world.getChildIndex(this._trail)),this._pickEmitter=t,t=new Particles.ParticlesEmitter(this.game,0,0,30),t.fixedToCamera=!0,t.lifetime=1,t.makeParticles("Sprites","ColorPtc",30),t.setAngle(0,360),t.setAngularSpeed(-90,90),t.setXSpeed(-50,50),t.setYSpeed(-50,50),t.setScale(4,5),t.setAlpha(.7,.7),t.setScaleChange(Particles.eParameterChangeType.IN_TIME,10,1),t.setAlphaChange(Particles.eParameterChangeType.IN_TIME,-.7,1),t.area=new Phaser.Rectangle(-20,-20,this.game.width+40,this.game.height+40),this.world.add(t),this._colorEmitter=t,t=new Particles.ParticlesEmitter(this.game,0,0,128),t.particleClass=Particles.AnimatedParticle,t.fixedToCamera=!0,t.lifetime=1,t.makeParticles("Sprites","glitter",128,[i.ANIM_GLITTER2]),t.setYSpeed(-100,100),t.setXSpeed(-100,100),t.area=new Phaser.Rectangle(0,0,this.game.width,this.game.height),this.world.add(t),this._glitterEmitter=t},i.DEBUG=!1,i.ANIM_PICK=[{name:"pick",frameRate:20,loop:!1,killOnComplete:!0,frames:["BonusPick0","BonusPick1","BonusPick2","BonusPick3","BonusPick4"]}],i.ANIM_GLITTER=[{name:"glitter",frameRate:20,loop:!0,killOnComplete:!1,frames:["Glitter0","Glitter0","Glitter0","Glitter0","Glitter1","Glitter2","Glitter0","Glitter0","Glitter0","Glitter0"]}],i.ANIM_GLITTER2=[{name:"glitter",frameRate:20,loop:!0,killOnComplete:!1,frames:["Glitter20","Glitter20","Glitter20","Glitter20","Glitter21","Glitter22","Glitter20","Glitter20","Glitter20","Glitter20"]}],i}(Phaser.State);t.Play=e}(Ridhwan||(Ridhwan={}));var Utils;!function(t){var e=function(){function t(){}return t.setSounds=function(e,i){void 0===i&&(i=null),t._sfx=e,t._sfxIds=i,t._isAudioSprite=null!==e&&e instanceof Phaser.AudioSprite},t.addSound=function(e,i){t._sfxs[e]=i},t.playSound=function(e){var i=t.getSoundName(e);Ridhwan.Global.soundOn&&(null!==t._sfx?t._isAudioSprite?t._sfx.play(i):t._sfx.play(i):void 0!==t._sfxs[i]&&t._sfxs[i].play())},t.stopSound=function(e){var i=t.getSoundName(e);null!==t._sfx?t._isAudioSprite&&t._sfx.stop(i):void 0!==t._sfxs[i]&&t._sfxs[i].stop()},t.getSoundName=function(e){var i;return i="number"==typeof e?t._sfxIds[e]:e},Object.defineProperty(t,"currentMusic",{get:function(){return t._currentMusic},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMusicPlaying",{get:function(){if(null===this._currentMusic||0===this._currentMusic.length)return!1;var e=t._music[t._currentMusic];return e.isPlaying},enumerable:!0,configurable:!0}),t.addMusic=function(e,i){t._music[e]=i},t.playMusic=function(e,i){if(void 0===i&&(i=!0),t._currentMusic!==e&&(null!==t._currentMusic&&t._currentMusic.length>0&&t.stopMusic(),e in t._music&&Ridhwan.Global.musicOn)){t._currentMusic=e;var n=t._music[e];n.loop=i,n.play(),i||n.onStop.addOnce(function(){t.onFinished.dispatch(e)},this)}},t.stopMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.stop(),t._currentMusic=""}},t.pauseMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.pause()}},t.resumeMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.paused&&e.resume()}},t._sfx=null,t._isAudioSprite=!1,t._sfxs={},t._music={},t._currentMusic="",t.onFinished=new Phaser.Signal,t}();t.AudioUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.supported=function(){var t=Ridhwan.Global.game;return t.scale.compatibility.supportsFullScreen},t.isFullscreen=function(){return Ridhwan.Global.game.scale.isFullScreen},t.changeFullscreen=function(){var e=Ridhwan.Global.game;t._fullscreen?e.scale.stopFullScreen():e.scale.startFullScreen(!1,!1)},t.onEnterFullscreen=function(){t._fullscreen=!0,null!==t._listener&&t._listener.call(t._listenerContext,!0)},t.onLeaveFullscreen=function(){t._fullscreen=!1,null!==t._listener&&t._listener.call(t._listenerContext,!1)},t.setListener=function(e,i){t._listener=e,t._listenerContext=i},t.removeListener=function(){t._listener=null,t._listenerContext=null},t._fullscreen=!1,t._listener=null,t._listenerContext=null,t}();t.FullscreenUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.ChangeAnimationPhaserJSONData=function(t){Phaser.AnimationParser.myCallback=t,Phaser.AnimationParser.JSONData=function(t,e){if(e.frames){for(var i=new Phaser.FrameData,n=e.frames,r=0;r<n.length;r++){var s=i.addFrame(new Phaser.Frame(r,n[r].frame.x,n[r].frame.y,n[r].frame.w,n[r].frame.h,n[r].filename));n[r].trimmed&&s.setTrim(n[r].trimmed,n[r].sourceSize.w,n[r].sourceSize.h,n[r].spriteSourceSize.x,n[r].spriteSourceSize.y,n[r].spriteSourceSize.w,n[r].spriteSourceSize.h),Phaser.AnimationParser.myCallback(s,n[r])}return i}}},t.AdjustTweenFunctions=function(){Phaser.TweenManager.prototype.removeFromUpdateQueue=function(t){var e=this._tweens.indexOf(t);-1!==e?this._tweens.splice(e,1):(e=this._add.indexOf(t),-1!==e&&this._add.splice(e,1))},Phaser.Tween.prototype.stopAndRemoveFromUpdateQueue=function(t){var e=this,i=e.stop(t);return e.manager.removeFromUpdateQueue(e),e.pendingDelete=!1,i}},t.AddBitmapFontAddMethod=function(){Phaser.Cache.prototype.addBitmapFontFromImage=function(t,e,i,n,r,s,a){var o=this.getImage(i,!0),h={url:e,data:o.data,font:null,base:o.base};void 0===s&&(s=0),void 0===a&&(a=0),"json"===r?h.font=Phaser.LoaderParser.jsonBitmapFont(n,h.base,s,a):h.font=Phaser.LoaderParser.xmlBitmapFont(n,h.base,s,a),this._cache.bitmapFont[t]=h,this._resolveURL(e,h)}},t}();t.PhaserUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t}();t.ScreenMetrics=e,function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE"}(t.Orientation||(t.Orientation={}));var i=t.Orientation,n=function(){function t(){}return t.calculateScreenMetrics=function(t,n,r,s,a){
void 0===r&&(r=i.LANDSCAPE);var o,h;o=window.innerWidth,h=window.innerHeight,o=Math.min(o,1.5*t),h=Math.min(h,1.5*n);var l=r===i.LANDSCAPE?t/n:t/n,p=o/h,u=0,c=0,_=0,d=0;p>l?(d=n,_=2*Math.ceil(d*p/2),_=Math.min(_,s),u=(_-t)/2,c=0):(_=t,d=2*Math.ceil(_/p/2),d=Math.min(d,a),u=0,c=(d-n)/2);var f=o/_,m=h/d;return this.screenMetrics=new e,this.screenMetrics.windowWidth=o,this.screenMetrics.windowHeight=h,this.screenMetrics.defaultGameWidth=t,this.screenMetrics.defaultGameHeight=n,this.screenMetrics.maxGameWidth=s,this.screenMetrics.maxGameHeight=a,this.screenMetrics.gameWidth=_,this.screenMetrics.gameHeight=d,this.screenMetrics.scaleX=f,this.screenMetrics.scaleY=m,this.screenMetrics.offsetX=u,this.screenMetrics.offsetY=c,this.screenMetrics},t}();t.ScreenUtils=n}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t}(),i=function(){function t(){}return t.save=function(){if(t.localStorageSupported()){var i=new e;i.musicOn=Ridhwan.Global.musicOn,i.soundOn=Ridhwan.Global.soundOn,i.currentLanguage=Ridhwan.Global.currentLanguage;var n=JSON.stringify(i);localStorage.setItem("rio_save",n)}},t.load=function(){if(t.localStorageSupported()){var e=JSON.parse(localStorage.getItem("rio_save"));return null===e||void 0===e?!1:(Ridhwan.Global.musicOn=e.musicOn,Ridhwan.Global.soundOn=e.soundOn,Ridhwan.Global.currentLanguage=e.currentLanguage,!0)}},t.localStorageSupported=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},t}();t.StorageUtils=i}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.padNumber=function(t,e,i){void 0===i&&(i="0");var n=t+"";return n.length>=e?n:new Array(e-n.length+1).join(i)+n},t}();t.StringUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.isAndroidStockBrowser=function(){var t=navigator.userAgent,e=/Android/.test(t),i=/Chrome/.test(t);return e&&!i},t}();t.SystemUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.setTexts=function(e){t._texts=e},t.getText=function(e){if(null===t._texts)return"Texts not set";var i=t._texts;if(void 0===i[e])return"";var n=i[e][Ridhwan.Global.currentLanguage];return void 0===n&&(Ridhwan.Global.currentLanguage="en",n=i[e][Ridhwan.Global.currentLanguage]),n},t.game=null,t._texts=null,t}();t.TextUtils=e}(Utils||(Utils={}));var Ridhwan;!function(t){var e=function(){function t(){}return t.GAMEE=!0,t.game=null,t.GAME_WIDTH=640,t.GAME_HEIGHT=640,t.MAX_GAME_WIDTH=640,t.MAX_GAME_HEIGHT=640,t.scaleX=1,t.scaleY=1,t.correctOrientation=!1,t.musicOn=!0,t.soundOn=!0,t.showLanguages=!1,t.supportedLanguages=["en"],t.currentLanguage="en",t}();t.Global=e}(Ridhwan||(Ridhwan={}));var PhaserGlobal={stopFocus:!0};window.onload=function(){var t=new Ridhwan.Game;if(Ridhwan.Global.game=t,Ridhwan.Global.GAMEE){var e=new Gamee.Gamee("OneButton",!0);e.setGame(t)}};var Ridhwan;!function(t){var e=function(e){function i(){var n=(window.innerWidth,window.innerHeight,Utils.ScreenUtils.calculateScreenMetrics(t.Global.GAME_WIDTH,t.Global.GAME_HEIGHT,Utils.Orientation.PORTRAIT,t.Global.MAX_GAME_WIDTH,t.Global.MAX_GAME_HEIGHT)),r=Phaser.AUTO;e.call(this,{width:n.gameWidth,height:n.gameHeight,renderer:r,parent:"content",transparent:!1,antialias:!0,physicsConfig:null,preserveDrawingBuffer:!0}),i.game=this,Utils.PhaserUtils.ChangeAnimationPhaserJSONData(this.additionalFrameProperties),Utils.PhaserUtils.AdjustTweenFunctions(),Utils.PhaserUtils.AddBitmapFontAddMethod(),this.state.add("Boot",t.Boot),this.state.add("Preloader",t.Preloader),this.state.add("Menu",t.Menu),this.state.add("Play",t.Play),this.state.add("Test",t.Play),this.state.start("Boot")}return __extends(i,e),i.prototype.onMute=function(){Utils.AudioUtils.stopMusic(),t.Global.soundOn=!1,t.Global.musicOn=!1,this.sound.mute=!0},i.prototype.onUnmute=function(){this.sound.mute=!1,t.Global.soundOn=!0,t.Global.musicOn=!0,Utils.AudioUtils.playMusic("Music")},i.prototype.additionalFrameProperties=function(t,e){e.anchor&&(t.anchorX=e.anchor.w,t.anchorY=e.anchor.h),e.nextitem&&(t.nextItemX=e.nextitem.w,t.nextItemY=e.nextitem.h)},i}(Phaser.Game);t.Game=e}(Ridhwan||(Ridhwan={}));
